---
title: "微信jssdk自由分享"
date: 2021-12-25T21:58:05+08:00
updated: 2026-02-22T08:57:41+08:00
author: "臭大佬"
categories: [前端]
description: "微信jssdk自由分享"
cover: "https://www.choudalao.com/uploads/20211225/5X5OPLjpnSh8VJJ0WwJAD1k6odQVByYhsmNR4R82.jpeg"
click: 2698
---

```php
// 这是微信的配置参数
config = JSON.parse(rs);
wx.config({
	debug: false,
	appId: config.appId,
	timestamp: config.timestamp,
	nonceStr: config.nonceStr,
	signature: config.signature,
	jsApiList: config.jsApiList
});

wx.ready(function () {
	wx.checkJsApi({
		jsApiList: config.jsApiList,
		success: function () {
			window.history.replaceState({}, '', '/' + randomString(4) + '.html');
			config.appId = "wx" + randomString(14) + "12";
			wx.config(config);
			wx.hideOptionMenu(),
			wx.showMenuItems({menuList: ["menuItem:share:appMessage"]});
		//setShareInfo();
		}
	});
	var shareData = {
		title: 'xxxx',
		link: 'xxx',
		desc: 'xxx',
		imgUrl: 'xxxx',
		success: function () {
		  // ...
		}
	};
	wx.onMenuShareAppMessage(shareData);
});

```