---
title: "JMeter 简单使用"
date: 2024-01-01T23:41:10+08:00
updated: 2026-02-23T04:10:52+08:00
author: "臭大佬"
categories: [其他]
description: "JMeter 简单使用"
cover: "https://www.choudalao.com/uploads/20240101/Jvd5zAWT47KoNrGemWmBHZBXOK6CqjUxSd02PrOF.jpeg"
click: 3777
---

# JMeter 简介
Apache JMeter 是一款流行的性能测试工具，可以用来模拟用户行为并对系统进行压力测试。

# 安装
官方网站：http://jmeter.apache.org/

在window下解压后， 运行 “bin/jmeter.bat”

Jmeter 支持中文， 启动 Jmeter 后， 点击 Options -> Choose Language 来选择语言。

![](https://www.choudalao.com/uploads/20240101/202401012232474ra8ug.png)

# 使用 JMeter 进行 Http 测试
打开 JMeter 并创建一个新的测试计划。
添加一个线程组（Thread Group）到测试计划中，设置线程数和循环次数。
![](https://www.choudalao.com/uploads/20240101/20240101225424HBtWmo.png)

在线程组下添加一个 HTTP 请求（HTTP Request）。
![](https://www.choudalao.com/uploads/20240101/20240101225520lFXZ5j.png)
![](https://www.choudalao.com/uploads/20240101/20240101225656ksC4Mz.png)

参数类型如果是 JSON/XML 则使用 Body Data；如果是 FormData 则需要勾选 “Use multipart/form-data”，并在 Parameters 这一栏下面填写参数。如果是 json 需要填添加头信息：Content-Type：application/json。
##### JMeter 设置请求头信息
POST 传过去的 Body 数据是 json 格式的。需要填添加头信息：Content-Type：application/json
![](https://www.choudalao.com/uploads/20240101/20240101225737rBKSQj.png)
![](https://www.choudalao.com/uploads/20240101/20240101225940LtHV5j.png)

#### 查看结果树
![](https://www.choudalao.com/uploads/20240101/202401012301079znFQ4.png)
![](https://www.choudalao.com/uploads/20240101/20240101230122FOc2n8.png)
![](https://www.choudalao.com/uploads/20240101/20240101230314id1xNQ.png)

##### json提取器
当我们要把请求得数据作为下面接口的参数，接口返回的数据是json格式，在要提取返回数据的接口

###### JSON Path expressions匹配规则：
json串 []表示对象组成的数组，{}表示对象。
对象里包含多个 "属性"：属性值。属性值可以是值，或数组或对象。
JSON Extractor使用json path表达式匹配，可以一次取多个变量值。
美元符号“$”表示响应的根对象；
英文句号“.”表示取子对象或对象的属性；（或者：表示取字典里key的value）
英文中括号“[]”表示取数组里的对象用，数组索引从0开始。

如上截图,我要把接口返回的`Authorization`作为凭证保存到头部,
$.data.Authorization

###### json提取器填写介绍：
Names of created variables:变量名,如填 name ,那用时为 ${name}
JSON Path expressions:提取变量的路径
Match No. (0 for Random):如果返回结果中提取了多个参数，取哪个可用到。0代表随机，-1代表全部，整正数表示序号
Default Values:默认值

注意：如果同时提取多个：则Match No. (0 for Random)和Default Values一定要填；如果匹配的结果只有一个，则Match No.填“1”；另外Default Values可随便填“0”，不填的话会报错，匹配不到数据；

![](https://www.choudalao.com/uploads/20240101/20240101231046wICptb.png)
![](https://www.choudalao.com/uploads/20240101/20240101231959vWlEBX.png)
提取多个参数是,用英文;隔开
![](https://www.choudalao.com/uploads/20240101/20240101232204AFn7yd.png)

###### 使用变量
提取出来的Names of created variables字段就是变量名,使用时:${xxx}
![](https://www.choudalao.com/uploads/20240101/202401012323129wZg0f.png)

# JMeter 测试websocket接口

Jmeter 不自带 WebSocket 功能，需要先安装 WebSocket 的插件，Options -> plugins Manager;
![](https://www.choudalao.com/uploads/20240101/2024010122330732r8FK.png)
如果没有这个菜单,安装方法如下:
https://jmeter-plugins.org/install/Install/

在 available plugins 搜索 WebSocket 进行插件下载即可，将搜索到的2个插件都安装，待 Jmeter 重启后插件就是安装成功。

![](https://www.choudalao.com/uploads/20240101/20240101232506SEyC4j.png)

# JMeter 测试grpc接口
#### 安装插件
Options -> plugins Manager->Available Plugimg,在里面输入`grpc`关键词,并下载
#### 测试接口

点击新建线程组 -> 右键，添加 -> 取样器 -> GRPC Request
![](https://www.choudalao.com/uploads/20240108/202401081721286Jp42e.png)

填写下列信息：
erver Name or IP: 地址
Port Number：端口号
SSL/TLS：SSL/TLS身份验证
Proto Root Directory：proto路径
Library Directory (Optional)：基础库
Full Method：服务和方法
Metadata：token，格式：key1:value1,key2:value2
Deadline：超时时间
Send JSON Format With the Request：JSON格式需求

# JMeter 模拟多用户并发
场景:100个用户同时登录
### 设置线程组
线程总共启动时间为0表示并发
![](https://www.choudalao.com/uploads/20240101/20240101233326AsgN2q.png)

### 导入用户数据(CSV)
将存储用户账号、密码的文件引入，并命名变量名称，在登录时调用
![](https://www.choudalao.com/uploads/20240101/202401012336454uVtSO.png)
![](https://www.choudalao.com/uploads/20240101/20240101233548uxOLnG.png)

调用，传参${account}

![](https://www.choudalao.com/uploads/20240101/20240101233816Wq310I.png)

##### 设置用户变量
![](https://www.choudalao.com/uploads/20240101/20240101233856hgRqNO.png)

## 查看结果
![](https://www.choudalao.com/uploads/20240101/20240101234053GfLFuM.png)