---
title: "go 表情包处理"
date: 2022-12-08T13:53:21+08:00
updated: 2026-02-23T08:51:16+08:00
author: "臭大佬"
categories: [Go]
description: "go 表情包处理"
cover: "https://www.choudalao.com/uploads/20221208/zzNelYd7kc8LV0T8Rri2fIYMmFfYsFXTOuDH7hUW.jpeg"
click: 2728
---

# 代码

```go
package stringsTool

import (
	"regexp"
	"strconv"
	"strings"
)

// UnicodeEmojiDecode
// @Summary 表情解码
// @Tags
// Method
// @Accept application/json
// @Product application/json
// @param s
// @return string
// @Router /api/v1/xxx [get]
// @Author Vijay
// @Security Bearer
func UnicodeEmojiDecode(s string) string {
	//emoji表情的数据表达式
	re := regexp.MustCompile("\\[[\\\\u0-9a-zA-Z]+\\]")
	//提取emoji数据表达式
	reg := regexp.MustCompile("\\[\\\\u|]")
	src := re.FindAllString(s, -1)
	for i := 0; i < len(src); i++ {
		e := reg.ReplaceAllString(src[i], "")
		p, err := strconv.ParseInt(e, 16, 32)
		if err == nil {
			s = strings.Replace(s, src[i], string(rune(p)), -1)
		}
	}
	return s
}

// UnicodeEmojiCode
// @Summary 表情转换
// @Tags
// Method
// @Accept application/json
// @Product application/json
// @param s
// @return string
// @Router /api/v1/xxx [get]
// @Author Vijay
// @Security Bearer
func UnicodeEmojiCode(s string) string {
	ret := ""
	rs := []rune(s)
	for i := 0; i < len(rs); i++ {
		if len(string(rs[i])) == 4 {
			u := `[\u` + strconv.FormatInt(int64(rs[i]), 16) + `]`
			ret += u

		} else {
			ret += string(rs[i])
		}
	}
	return ret
}

```