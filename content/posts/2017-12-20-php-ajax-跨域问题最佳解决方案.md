---
title: "PHP Ajax 跨域问题最佳解决方案"
date: 2017-12-20T10:32:40+08:00
updated: 2026-02-23T07:22:08+08:00
author: "臭大佬"
categories: [php]
description: "PHP Ajax 跨域问题最佳解决方案"
cover: "http://www.choudalao.com/uploads/20191016/rOOP5k0cxYLPuuiThWeKRjp4pMmiCDta1KmLCwkE.jpeg"
click: 2932
---

&lt;p helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; color:=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;本文通过设置&lt;strong&gt;Access-Control-Allow-Origin&lt;/strong&gt;来实现跨域。&lt;/p&gt;&lt;p helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; color:=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;例如：客户端的域名是client.runoob.com，而请求的域名是server.runoob.com。&lt;/p&gt;&lt;p helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; color:=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;如果直接使用ajax访问，会有以下错误：&lt;/p&gt;&lt;pre lay-lang=&quot;JavaScript&quot;&gt;&lt;code class=&quot;JavaScript&quot;&gt;XMLHttpRequest cannot load http://server.runoob.com/server.php. No 'Access-Control-Allow-Origin' header is present on the requested resource.Origin 'http://client.runoob.com' is therefore not allowed access.&lt;/code&gt;&lt;/pre&gt;&lt;h2 helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;&lt;br&gt;&lt;/h2&gt;&lt;h2&gt;1、允许单个域名访问&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; color:=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;指定某域名（http://client.runoob.com）跨域访问，则只需在http://server.runoob.com/server.php文件头部添加如下代码：&lt;/p&gt;&lt;pre lay-lang=&quot;JavaScript&quot;&gt;&lt;code class=&quot;JavaScript&quot;&gt;header('Access-Control-Allow-Origin:http://client.runoob.com');&lt;/code&gt;&lt;/pre&gt;&lt;h2 helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;&lt;br&gt;&lt;/h2&gt;&lt;h2&gt;2、允许多个域名访问&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; color:=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;指定多个域名（http://client1.runoob.com、http://client2.runoob.com等）跨域访问，则只需在http://server.runoob.com/server.php文件头部添加如下代码：&lt;/p&gt;&lt;pre lay-lang=&quot;JavaScript&quot;&gt;&lt;code class=&quot;JavaScript&quot;&gt;$origin = isset($_SERVER['HTTP_ORIGIN']) ? $_SERVER['HTTP_ORIGIN'] : '';
$allow_origin = array(
    'http://client1.runoob.com',
    'http://client2.runoob.com');
if (in_array($origin, $allow_origin)) {
    header('Access-Control-Allow-Origin:' . $origin);
}&lt;/code&gt;&lt;/pre&gt;&lt;h2 helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;&lt;br&gt;&lt;/h2&gt;&lt;h2&gt;3、允许所有域名访问&lt;/h2&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p helvetica=&quot;&quot; pingfang=&quot;&quot; hiragino=&quot;&quot; sans=&quot;&quot; microsoft=&quot;&quot; noto=&quot;&quot; cjk=&quot;&quot; wenquanyi=&quot;&quot; micro=&quot;&quot; color:=&quot;&quot; white-space:=&quot;&quot; background-color:=&quot;&quot;&gt;允许所有域名访问则只需在http://server.runoob.com/server.php文件头部添加如下代码：&lt;/p&gt;&lt;pre lay-lang=&quot;JavaScript&quot;&gt;&lt;code class=&quot;JavaScript&quot;&gt;header('Access-Control-Allow-Origin:*');&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;