<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>PHP对redis操作详解 - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="PHP对redis操作详解"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/post/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>PHP对redis操作详解</h1></header><div class="content post__content clearfix"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>/*1.Connection*/</span>
</span></span><span style=display:flex><span>$redis <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Redis</span>();
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>connect</span>(<span style=color:#e6db74>&#39;127.0.0.1&#39;</span>,<span style=color:#ae81ff>6379</span>,<span style=color:#ae81ff>1</span>);<span style=color:#75715e>//短链接，本地host，端口为6379，超过1秒放弃链接
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>open</span>(<span style=color:#e6db74>&#39;127.0.0.1&#39;</span>,<span style=color:#ae81ff>6379</span>,<span style=color:#ae81ff>1</span>);<span style=color:#75715e>//短链接(同上)
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>pconnect</span>(<span style=color:#e6db74>&#39;127.0.0.1&#39;</span>,<span style=color:#ae81ff>6379</span>,<span style=color:#ae81ff>1</span>);<span style=color:#75715e>//长链接，本地host，端口为6379，超过1秒放弃链接
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>popen</span>(<span style=color:#e6db74>&#39;127.0.0.1&#39;</span>,<span style=color:#ae81ff>6379</span>,<span style=color:#ae81ff>1</span>);<span style=color:#75715e>//长链接(同上)
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>auth</span>(<span style=color:#e6db74>&#39;password&#39;</span>);<span style=color:#75715e>//登录验证密码，返回【true | false】
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>select</span>(<span style=color:#ae81ff>0</span>);<span style=color:#75715e>//选择redis库,0~15 共16个库
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>close</span>();<span style=color:#75715e>//释放资源
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ping</span>(); <span style=color:#75715e>//检查是否还再链接,[+pong]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ttl</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//查看失效时间[-1 | timestamps]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>persist</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//移除失效时间[ 1 | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>sort</span>(<span style=color:#e6db74>&#39;key&#39;</span>,[$array]);<span style=color:#75715e>//返回或保存给定列表、集合、有序集合key中经过排序的元素，$array为参数limit等！【配合$array很强大】 [array|false]
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*2.共性的运算归类*/</span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>expire</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#ae81ff>10</span>);<span style=color:#75715e>//设置失效时间[true | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>move</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#ae81ff>15</span>);<span style=color:#75715e>//把当前库中的key移动到15库中[0|1]
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//string
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>strlen</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//获取当前key的长度
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>append</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;string&#39;</span>);<span style=color:#75715e>//把string追加到key现有的value中[追加后的个数]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>incr</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//自增1，如不存在key,赋值为1(只对整数有效,存储以10进制64位，redis中为str)[new_num | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>incrby</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$num);<span style=color:#75715e>//自增$num,不存在为赋值,值需为整数[new_num | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>decr</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//自减1，[new_num | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>decrby</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$num);<span style=color:#75715e>//自减$num，[ new_num | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setex</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#ae81ff>10</span>,<span style=color:#e6db74>&#39;value&#39;</span>);<span style=color:#75715e>//key=value，有效期为10秒[true]
</span></span></span><span style=display:flex><span><span style=color:#75715e>//list
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>llen</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//返回列表key的长度,不存在key返回0， [ len | 0]
</span></span></span><span style=display:flex><span><span style=color:#75715e>//set
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>scard</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//返回集合key的基数(集合中元素的数量)。[num | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>sMove</span>(<span style=color:#e6db74>&#39;key1&#39;</span>, <span style=color:#e6db74>&#39;key2&#39;</span>, <span style=color:#e6db74>&#39;member&#39;</span>);<span style=color:#75715e>//移动，将member元素从key1集合移动到key2集合。[1 | 0]
</span></span></span><span style=display:flex><span><span style=color:#75715e>//Zset
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zcard</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//返回集合key的基数(集合中元素的数量)。[num | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zcount</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);<span style=color:#75715e>//返回有序集key中，score值在min和max之间(默认包括score值等于min或max)的成员。[num | 0]
</span></span></span><span style=display:flex><span><span style=color:#75715e>//hash
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hexists</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;field&#39;</span>);<span style=color:#75715e>//查看hash中是否存在field,[1 | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hincrby</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;field&#39;</span>,$int_num);<span style=color:#75715e>//为哈希表key中的域field的值加上量(+|-)num,[new_num | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hlen</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//返回哈希表key中域的数量。[ num | 0]
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*3.Server*/</span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>dbSize</span>();<span style=color:#75715e>//返回当前库中的key的个数
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>flushAll</span>();<span style=color:#75715e>//清空整个redis[总true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>flushDB</span>();<span style=color:#75715e>//清空当前redis库[总true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>save</span>();<span style=color:#75715e>//同步??把数据存储到磁盘-dump.rdb[true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>bgsave</span>();<span style=color:#75715e>//异步？？把数据存储到磁盘-dump.rdb[true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>info</span>();<span style=color:#75715e>//查询当前redis的状态 [verson:2.4.5....]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lastSave</span>();<span style=color:#75715e>//上次存储时间key的时间[timestamp]
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>watch</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;keyn&#39;</span>);<span style=color:#75715e>//监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断 [true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>unwatch</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;keyn&#39;</span>);<span style=color:#75715e>//取消监视一个(或多个) key [true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>multi</span>(<span style=color:#a6e22e>Redis</span><span style=color:#f92672>::</span><span style=color:#a6e22e>MULTI</span>);<span style=color:#75715e>//开启事务，事务块内的多条命令会按照先后顺序被放进一个队列当中，最后由 EXEC 命令在一个原子时间内执行。
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>multi</span>(<span style=color:#a6e22e>Redis</span><span style=color:#f92672>::</span><span style=color:#a6e22e>PIPELINE</span>);<span style=color:#75715e>//开启管道，事务块内的多条命令会按照先后顺序被放进一个队列当中，最后由 EXEC 命令在一个原子时间内执行。
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>exec</span>();<span style=color:#75715e>//执行所有事务块内的命令，；【事务块内所有命令的返回值，按命令执行的先后顺序排列，当操作被打断时，返回空值 false】
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*4.String，键值对，创建更新同操作*/</span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setOption</span>(<span style=color:#a6e22e>Redis</span><span style=color:#f92672>::</span><span style=color:#a6e22e>OPT_PREFIX</span>,<span style=color:#e6db74>&#39;hf_&#39;</span>);<span style=color:#75715e>//设置表前缀为hf_
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>set</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#ae81ff>1</span>);<span style=color:#75715e>//设置key=aa value=1 [true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>mset</span>($arr);<span style=color:#75715e>//设置一个或多个键值[true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>setnx</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value&#39;</span>);<span style=color:#75715e>//key=value,key存在返回false[|true]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//获取key [value]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>mget</span>($arr);<span style=color:#75715e>//(string|arr),返回所查询键的值
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>del</span>($key_arr);<span style=color:#75715e>//(string|arr)删除key，支持数组批量删除【返回删除个数】
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>delete</span>($key_str,$key2,$key3);<span style=color:#75715e>//删除keys,[del_num]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getset</span>(<span style=color:#e6db74>&#39;old_key&#39;</span>,<span style=color:#e6db74>&#39;new_value&#39;</span>);<span style=color:#75715e>//先获得key的值，然后重新赋值,[old_value | false]
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*5.List栈的结构,注意表头表尾,创建更新分开操作*/</span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lpush</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value&#39;</span>);<span style=color:#75715e>//增，只能将一个值value插入到列表key的表头，不存在就创建 [列表的长度 |false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rpush</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value&#39;</span>);<span style=color:#75715e>//增，只能将一个值value插入到列表key的表尾 [列表的长度 |false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lInsert</span>(<span style=color:#e6db74>&#39;key&#39;</span>, <span style=color:#a6e22e>Redis</span><span style=color:#f92672>::</span><span style=color:#a6e22e>AFTER</span>, <span style=color:#e6db74>&#39;value&#39;</span>, <span style=color:#e6db74>&#39;new_value&#39;</span>);<span style=color:#75715e>//增，将值value插入到列表key当中，位于值value之前或之后。[new_len | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lpushx</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value&#39;</span>);<span style=color:#75715e>//增，只能将一个值value插入到列表key的表头，不存在不创建 [列表的长度 |false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rpushx</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value&#39;</span>);<span style=color:#75715e>//增，只能将一个值value插入到列表key的表尾，不存在不创建 [列表的长度 |false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lpop</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//删，移除并返回列表key的头元素,[被删元素 | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rpop</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//删，移除并返回列表key的尾元素,[被删元素 | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lrem</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value&#39;</span>,<span style=color:#ae81ff>0</span>);<span style=color:#75715e>//删，根据参数count的值，移除列表中与参数value相等的元素count=(0|-n表头向尾|+n表尾向头移除n个value) [被移除的数量 | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ltrim</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#a6e22e>start</span>,<span style=color:#a6e22e>end</span>);<span style=color:#75715e>//删，列表修剪，保留(start,end)之间的值 [true|false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lset</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#a6e22e>index</span>,<span style=color:#e6db74>&#39;new_v&#39;</span>);<span style=color:#75715e>//改，从表头数，将列表key下标为第index的元素的值为new_v, [true | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lindex</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#a6e22e>index</span>);<span style=color:#75715e>//查，返回列表key中，下标为index的元素[value|false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>lrange</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#ae81ff>0</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);<span style=color:#75715e>//查，(start,stop|0,-1)返回列表key中指定区间内的元素，区间以偏移量start和stop指定。[array|false]
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*6.Set，没有重复的member，创建更新同操作*/</span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>sadd</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value1&#39;</span>,<span style=color:#e6db74>&#39;value2&#39;</span>,<span style=color:#e6db74>&#39;valuen&#39;</span>);<span style=color:#75715e>//增，改，将一个或多个member元素加入到集合key当中，已经存在于集合的member元素将被忽略。[insert_num]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>srem</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;value1&#39;</span>,<span style=color:#e6db74>&#39;value2&#39;</span>,<span style=color:#e6db74>&#39;valuen&#39;</span>);<span style=color:#75715e>//删，移除集合key中的一个或多个member元素，不存在的member元素会被忽略 [del_num | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>smembers</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//查，返回集合key中的所有成员 [array | &#39;&#39;]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>sismember</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;member&#39;</span>);<span style=color:#75715e>//判断member元素是否是集合key的成员 [1 | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>spop</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//删，移除并返回集合中的一个随机元素 [member | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>srandmember</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//查，返回集合中的一个随机元素 [member | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>sinter</span>(<span style=color:#e6db74>&#39;key1&#39;</span>,<span style=color:#e6db74>&#39;key2&#39;</span>,<span style=color:#e6db74>&#39;keyn&#39;</span>);<span style=color:#75715e>//查，返回所有给定集合的交集 [array | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>sunion</span>(<span style=color:#e6db74>&#39;key1&#39;</span>,<span style=color:#e6db74>&#39;key2&#39;</span>,<span style=color:#e6db74>&#39;keyn&#39;</span>);<span style=color:#75715e>//查，返回所有给定集合的并集 [array | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>sdiff</span>(<span style=color:#e6db74>&#39;key1&#39;</span>,<span style=color:#e6db74>&#39;key2&#39;</span>,<span style=color:#e6db74>&#39;keyn&#39;</span>);<span style=color:#75715e>//查，返回所有给定集合的差集 [array | false]
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*7.Zset，没有重复的member，有排序顺序,创建更新同操作*/</span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zAdd</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$score1,$member1,$scoreN,$memberN);<span style=color:#75715e>//增，改，将一个或多个member元素及其score值加入到有序集key当中。[num | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zrem</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;member1&#39;</span>,<span style=color:#e6db74>&#39;membern&#39;</span>);<span style=color:#75715e>//删，移除有序集key中的一个或多个成员，不存在的成员将被忽略。[del_num | 0]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zscore</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;member&#39;</span>);<span style=color:#75715e>//查,通过值反拿权 [num | null]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zrange</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$start,$stop);<span style=color:#75715e>//查，通过(score从小到大)【排序名次范围】拿member值，返回有序集key中，【指定区间内】的成员 [array | null]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zrevrange</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$start,$stop);<span style=color:#75715e>//查，通过(score从大到小)【排序名次范围】拿member值，返回有序集key中，【指定区间内】的成员 [array | null]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zrangebyscore</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$min,$max[,$config]);<span style=color:#75715e>//查，通过scroe权范围拿member值，返回有序集key中，指定区间内的(从小到大排)成员[array | null]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zrevrangebyscore</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$max,$min[,$config]);<span style=color:#75715e>//查，通过scroe权范围拿member值，返回有序集key中，指定区间内的(从大到小排)成员[array | null]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zrank</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;member&#39;</span>);<span style=color:#75715e>//查，通过member值查(score从小到大)排名结果中的【member排序名次】[order | null]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>zrevrank</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;member&#39;</span>);<span style=color:#75715e>//查，通过member值查(score从大到小)排名结果中的【member排序名次】[order | null]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ZINTERSTORE</span>();<span style=color:#75715e>//交集
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>ZUNIONSTORE</span>();<span style=color:#75715e>//差集
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*8.Hash，表结构，创建更新同操作*/</span>
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hset</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;field&#39;</span>,<span style=color:#e6db74>&#39;value&#39;</span>);<span style=color:#75715e>//增，改，将哈希表key中的域field的值设为value,不存在创建,存在就覆盖【1 | 0】
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hget</span>(<span style=color:#e6db74>&#39;key&#39;</span>,<span style=color:#e6db74>&#39;field&#39;</span>);<span style=color:#75715e>//查，取值【value|false】
</span></span></span><span style=display:flex><span>$arr <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;one&#39;</span><span style=color:#f92672>=&gt;</span><span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>);$arr2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;one&#39;</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hmset</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$arr);<span style=color:#75715e>//增，改，设置多值$arr为(索引|关联)数组,$arr[key]=field, [ true ]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hmget</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$arr2);<span style=color:#75715e>//查，获取指定下标的field，[$arr | false]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hgetall</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//查，返回哈希表key中的所有域和值。[当key不存在时，返回一个空表]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hkeys</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//查，返回哈希表key中的所有域。[当key不存在时，返回一个空表]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hvals</span>(<span style=color:#e6db74>&#39;key&#39;</span>);<span style=color:#75715e>//查，返回哈希表key中的所有值。[当key不存在时，返回一个空表]
</span></span></span><span style=display:flex><span>$redis<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>hdel</span>(<span style=color:#e6db74>&#39;key&#39;</span>,$arr2);<span style=color:#75715e>//删，删除指定下标的field,不存在的域将被忽略,[num | false]
</span></span></span></code></pre></div></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>