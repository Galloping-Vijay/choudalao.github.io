<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Warning: (1366, "Incorrect string value: '\\xD6\\xD0\\xB9\\xFA\\xB1\\xEA...' for column 'VARIABLE_VALUE' at row 518") result = self._query(query) - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Warning: (1366, &#34;Incorrect string value: '\\xD6\\xD0\\xB9\\xFA\\xB1\\xEA...' for column 'VARIABLE_VALUE' at row 518&#34;)
result = self._query(query)"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/post/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Warning: (1366, "Incorrect string value: '\\xD6\\xD0\\xB9\\xFA\\xB1\\xEA...' for column 'VARIABLE_VALUE' at row 518") result = self._query(query)</h1></header><div class="content post__content clearfix"><h1 id=问题>问题</h1><p>** Warning: (1366, &ldquo;Incorrect string value: &lsquo;\xD6\xD0\xB9\xFA\xB1\xEA&mldr;&rsquo; for column &lsquo;VARIABLE_VALUE&rsquo; at row 518&rdquo;)
result = self._query(query)**</p><p><img src=https://www.choudalao.com/uploads/20200319/20200319000450oEwZDL.png alt></p><h1 id=解决>解决</h1><p>安装mysql-connector-python驱动</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span>pip install mysql<span style=color:#f92672>-</span>connector<span style=color:#f92672>-</span>python
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20200319/20200319000548rVXpW1.png alt></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 连接方式替换掉</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#create_engine(&#34;mysql+pymysql://root:root@127.0.0.1:3306/python_test?charset=utf8mb4&#34;,)  改成</span>
</span></span><span style=display:flex><span>create_engine(<span style=color:#e6db74>&#34;mysql+mysqlconnector://root:root@127.0.0.1:3306/python_test?charset=utf8mb4&#34;</span>)
</span></span></code></pre></div><h1 id=运行的代码>运行的代码</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> datetime
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> sqlalchemy <span style=color:#f92672>import</span> create_engine
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> sqlalchemy.ext.declarative <span style=color:#f92672>import</span> declarative_base
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> sqlalchemy <span style=color:#f92672>import</span> Column, Integer, String, Text, ForeignKey, DateTime, UniqueConstraint, Index
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Base是declarative_base的实例化对象</span>
</span></span><span style=display:flex><span>Base <span style=color:#f92672>=</span> declarative_base()
</span></span><span style=display:flex><span><span style=color:#75715e># 定义一个常量</span>
</span></span><span style=display:flex><span>ENGINE <span style=color:#f92672>=</span> create_engine(<span style=color:#e6db74>&#34;mysql+mysqlconnector://root:root@127.0.0.1:3306/python_test&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 每个类都要继承Base</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Users</span>(Base):
</span></span><span style=display:flex><span>    __tablename__ <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;users&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Column是列的意思，固定写法 Column(字段类型, 参数)</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># primary_key主键、index索引、nullable是否可以为空</span>
</span></span><span style=display:flex><span>    id <span style=color:#f92672>=</span> Column(Integer, primary_key<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> Column(String(<span style=color:#ae81ff>32</span>), index<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, nullable<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># 相当于Django的ORM的class Meta，是一些元信息</span>
</span></span><span style=display:flex><span>    __table_args__ <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>init_db</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># metadata.create_all创建所有表</span>
</span></span><span style=display:flex><span>    Base<span style=color:#f92672>.</span>metadata<span style=color:#f92672>.</span>create_all(ENGINE)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>drop_db</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># metadata.drop_all删除所有表</span>
</span></span><span style=display:flex><span>    Base<span style=color:#f92672>.</span>metadata<span style=color:#f92672>.</span>drop_all(ENGINE)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    init_db()
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20200319/20200319001406ySM3ij.png alt></p></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>