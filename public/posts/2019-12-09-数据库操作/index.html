<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>数据库操作 - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="数据库操作"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/post/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>数据库操作</h1></header><div class="content post__content clearfix"><h1 id=进入数据库win下-mysql--u-root--p>进入数据库(win下)( mysql -u root -p)</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span>mysql <span style=color:#f92672>-</span>hlocalhost <span style=color:#f92672>-</span>uroot <span style=color:#f92672>-</span>p12345 <span style=color:#f92672>//-</span>p后面跟的是密码
</span></span></code></pre></div><p>#显示数据库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SHOW</span> DATABASES;
</span></span></code></pre></div><p>#打开数据库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span>USE db_name;
</span></span></code></pre></div><p>#显示数据表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>show</span> tables;
</span></span></code></pre></div><p>#创建库
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> DATABASES db_name;
</span></span></code></pre></div><p>#删除数据库
#语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>DATABASE</span> db_name;
</span></span></code></pre></div><p>#创建表</p><h2 id=语法>语法:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> tb_name ( 
</span></span><span style=display:flex><span>column_name_1 column_type_1 <span style=color:#66d9ef>constraints</span>,
</span></span><span style=display:flex><span> column_name_2 column_type_2 <span style=color:#66d9ef>constraints</span>,
</span></span><span style=display:flex><span>  column_name_3 column_type_3 <span style=color:#66d9ef>constraints</span>, 
</span></span><span style=display:flex><span>  ... 
</span></span><span style=display:flex><span>  column_name_n column_type_n <span style=color:#66d9ef>constraint</span>
</span></span><span style=display:flex><span>  s)
</span></span></code></pre></div><h2 id=示例>示例:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>hz_chat_user<span style=color:#f92672>`</span> (
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>11</span>) unsigned <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> AUTO_INCREMENT,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>account<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>150</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;账号&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>head_img<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>255</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;头像&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>status<span style=color:#f92672>`</span> tinyint(<span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;账号状态,1:启用,0:禁用&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>password<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>255</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;密码&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>tel<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>11</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;电话&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>wechat<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>100</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;微信&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>qq<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>13</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;QQ&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>email<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>50</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;邮箱&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>sex<span style=color:#f92672>`</span> tinyint(<span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;-1&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;性别,-1:保密,0:男,1:女&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>delete_time<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;删除时间戳&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>create_time<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;0&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>update_time<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;0&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> (<span style=color:#f92672>`</span>id<span style=color:#f92672>`</span>),
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>KEY</span> <span style=color:#f92672>`</span>user_id<span style=color:#f92672>`</span> (<span style=color:#f92672>`</span>user_id<span style=color:#f92672>`</span>) <span style=color:#66d9ef>USING</span> BTREE,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>KEY</span> <span style=color:#f92672>`</span>account_delete<span style=color:#f92672>`</span> (<span style=color:#f92672>`</span>account<span style=color:#f92672>`</span>,<span style=color:#f92672>`</span>delete_time<span style=color:#f92672>`</span>) <span style=color:#66d9ef>USING</span> BTREE
</span></span><span style=display:flex><span>) ENGINE<span style=color:#f92672>=</span>InnoDB <span style=color:#66d9ef>DEFAULT</span> CHARSET<span style=color:#f92672>=</span>utf8mb4 <span style=color:#66d9ef>COMMENT</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;用户基本信息表&#39;</span>;
</span></span></code></pre></div><p>#查看表定义</p><h2 id=语法-1>语法</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DESC</span> tb_name;
</span></span></code></pre></div><p>##示例
<img src=https://www.choudalao.com/uploads/20191218/20191218100943jwiR3P.png alt></p><p>#查看创建表的SQL语句</p><h2 id=语法-2>语法</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SHOW</span> <span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> db_name;
</span></span></code></pre></div><p>#删除表
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>TABLE</span> tb_name
</span></span></code></pre></div><p>#增加表字段</p><h2 id=语法-3>语法</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> tb_name 
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> [<span style=color:#66d9ef>COLUMN</span>] <span style=color:#66d9ef>column_name</span> column_definition [<span style=color:#66d9ef>FIRST</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#66d9ef>column_name</span>];
</span></span></code></pre></div><p>##实例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>hz_chat_user<span style=color:#f92672>`</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>COLUMN</span> <span style=color:#f92672>`</span>job<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>100</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;职业&#39;</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#f92672>`</span>city<span style=color:#f92672>`</span>,
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>COLUMN</span> <span style=color:#f92672>`</span>age<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>4</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;年龄&#39;</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#f92672>`</span>job<span style=color:#f92672>`</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>hz_chat_shop<span style=color:#f92672>`</span> 
</span></span><span style=display:flex><span>CHANGE <span style=color:#66d9ef>COLUMN</span> <span style=color:#f92672>`</span>end_time<span style=color:#f92672>`</span> <span style=color:#f92672>`</span>close_time<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>100</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_general_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;02:00&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;结束营业时间&#39;</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#f92672>`</span>open_time<span style=color:#f92672>`</span>,
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>COLUMN</span> <span style=color:#f92672>`</span>chat_status<span style=color:#f92672>`</span> tinyint(<span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;聊天室状态,0:关闭,1:开启&#39;</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#f92672>`</span>status<span style=color:#f92672>`</span>
</span></span></code></pre></div><p>#修改索引</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>gameduncs<span style=color:#f92672>`</span>.<span style=color:#f92672>`</span>app_gamedunmonitor<span style=color:#f92672>`</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#f92672>`</span>create_time_str<span style=color:#f92672>`</span>(<span style=color:#f92672>`</span>create_time_str<span style=color:#f92672>`</span>) <span style=color:#66d9ef>USING</span> BTREE
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span>  <span style=color:#f92672>`</span>hz_chat_user_relation<span style=color:#f92672>`</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#f92672>`</span>from_id<span style=color:#f92672>`</span>,
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#f92672>`</span>from_to_id<span style=color:#f92672>`</span>(<span style=color:#f92672>`</span>from_id<span style=color:#f92672>`</span>, <span style=color:#f92672>`</span>to_id<span style=color:#f92672>`</span>) <span style=color:#66d9ef>USING</span> BTREE
</span></span></code></pre></div><p>#删除表字段
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> tb_name <span style=color:#66d9ef>DROP</span> [<span style=color:#66d9ef>COLUMN</span>] <span style=color:#66d9ef>column_name</span>;
</span></span></code></pre></div><p>#修改表(字段)
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> tb_name 
</span></span><span style=display:flex><span><span style=color:#66d9ef>MODIFY</span> [<span style=color:#66d9ef>COLUMN</span>] <span style=color:#66d9ef>column_name</span> column_definition [<span style=color:#66d9ef>FIRST</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#66d9ef>column_name</span>];
</span></span></code></pre></div><p>#示例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>hz_chat_info<span style=color:#f92672>`</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>MODIFY</span> <span style=color:#66d9ef>COLUMN</span> <span style=color:#f92672>`</span>group_id<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>11</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;聊天室id(一般情况下都是chat_shop表的id)&#39;</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#f92672>`</span>chat_user_id<span style=color:#f92672>`</span>,
</span></span><span style=display:flex><span><span style=color:#66d9ef>MODIFY</span> <span style=color:#66d9ef>COLUMN</span> <span style=color:#f92672>`</span>chat_relation<span style=color:#f92672>`</span> tinyint(<span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;0:商户聊天室&#39;</span> <span style=color:#66d9ef>AFTER</span> <span style=color:#f92672>`</span>group_id<span style=color:#f92672>`</span>,
</span></span><span style=display:flex><span><span style=color:#66d9ef>ADD</span> <span style=color:#66d9ef>INDEX</span> <span style=color:#f92672>`</span>chat_user_id<span style=color:#f92672>`</span>(<span style=color:#f92672>`</span>chat_user_id<span style=color:#f92672>`</span>) <span style=color:#66d9ef>USING</span> BTREE,
</span></span><span style=display:flex><span><span style=color:#66d9ef>COMMENT</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;聊天室内容&#39;</span>
</span></span></code></pre></div><p>#修改表名
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>ALTER</span> <span style=color:#66d9ef>TABLE</span> tb_name <span style=color:#66d9ef>RENAME</span> [<span style=color:#66d9ef>TO</span>] new_tb_name;
</span></span></code></pre></div><p>##示例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>RENAME</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>hz_chat_info<span style=color:#f92672>`</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>TO</span> <span style=color:#f92672>`</span>hz_chat_group_info<span style=color:#f92672>`</span>;
</span></span></code></pre></div><p>#插入记录
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> tb_name 
</span></span><span style=display:flex><span>(field1, field2, ..., fieldn) 
</span></span><span style=display:flex><span>VAULES(value1, value2, ...,valuen);
</span></span></code></pre></div><p>##插入多条</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> tb_name (field1, field2, ..., fieldn) 
</span></span><span style=display:flex><span>VAULES
</span></span><span style=display:flex><span>(record1_value1, record1_value2, ...,record1_valuen),
</span></span><span style=display:flex><span>(record2_value1, record2_value2, ...,record2_valuen),
</span></span><span style=display:flex><span>(recordn_value1, recordn_value2, ...,recordn_valuen);
</span></span></code></pre></div><p>#更新记录</p><h2 id=语法-4>语法</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> tb_name 
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> field1<span style=color:#f92672>=</span>value1, field2<span style=color:#f92672>=</span>value2, ..., fieldn<span style=color:#f92672>=</span>valuen [<span style=color:#66d9ef>WHERE</span> condition];
</span></span></code></pre></div><p>#更新多个表中的数据</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> tb_name1, tb_name2, ..., tb_namen 
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span> tb_name1.field<span style=color:#f92672>=</span>value, ..., tb_namen.field<span style=color:#f92672>=</span>value [<span style=color:#66d9ef>WHERE</span> condition];
</span></span></code></pre></div><p>##删除记录
#语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> tb_name [<span style=color:#66d9ef>WHERE</span> condition];
</span></span></code></pre></div><p>#删除多个表中的数据</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> tb_name1, tb_name2, ..., tb_namen 
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> tb_name1, tb_name2, ..., tb_namen [<span style=color:#66d9ef>WHERE</span> condition];
</span></span></code></pre></div><p>#查询记录
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> [field1, field2, ..., fieldn] function_name 
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> tb_name 
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>WHERE</span> condition] 
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> field1 [<span style=color:#66d9ef>DESC</span><span style=color:#f92672>|</span><span style=color:#66d9ef>ASC</span>], field2 [<span style=color:#66d9ef>DESC</span><span style=color:#f92672>|</span><span style=color:#66d9ef>ASC</span>], ..., fieldn [<span style=color:#66d9ef>DESC</span><span style=color:#f92672>|</span>ACS]]
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> field1, field2, ..., fieldn 
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>WITH</span> <span style=color:#66d9ef>ROLLUP</span>] 
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>HAVING</span> condition]]
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>LIMIT</span> offset_start, <span style=color:#66d9ef>row_count</span>];
</span></span></code></pre></div><blockquote><p>注释
function_name 表示要做的聚合操作，又称聚合函数。常用的有 sum()、 count(*)、 max() 和 min()。
GROUP BY 关键字表示要进行分类聚合的字段。
WITH ROLLUP 表明是否对分类聚合后的结果进行再汇总。
HAVING 关键字表示对分类后的结果再进行条件的过滤。
注意：HAVING 和 WHERE 的区别在于，HAVING 是对聚合后的结果进行条件的过滤，而 WHERE 是对聚合前的记录进行过滤。</p></blockquote><p>##示例</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span> <span style=color:#66d9ef>sum</span>(<span style=color:#f92672>`</span>port<span style=color:#f92672>`</span>) <span style=color:#66d9ef>as</span> port_com,<span style=color:#66d9ef>sum</span>(<span style=color:#f92672>`</span>https_origin_off<span style=color:#f92672>`</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>from</span>  gf_hostpool_domainrules <span style=color:#66d9ef>where</span> <span style=color:#f92672>`</span>https_origin_off<span style=color:#f92672>`=</span><span style=color:#ae81ff>2</span>  <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span>  <span style=color:#f92672>`</span>hostpool_id<span style=color:#f92672>`</span> <span style=color:#66d9ef>HAVING</span> <span style=color:#f92672>`</span>hostpool_id<span style=color:#f92672>`=</span><span style=color:#ae81ff>4</span>;
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20191218/20191218101436P2N09Q.png alt></p><p>#表连接
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> left_field, right_field 
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> left_tb_name
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>INNER</span><span style=color:#f92672>|</span><span style=color:#66d9ef>LEFT</span><span style=color:#f92672>|</span><span style=color:#66d9ef>RIGHT</span>] <span style=color:#66d9ef>JOIN</span> right_tb_name 
</span></span><span style=display:flex><span><span style=color:#66d9ef>ON</span> condition;
</span></span></code></pre></div><p>#子查询</p><blockquote><p>查询的时候，condition 需要的条件是另外一个 SELECT 语句的结果，称为子查询。
子查询的关键字主要包括：IN、 NOT IN、 =、 !=、 EXISTS 和
NOT EXISTS 等。
记录联合
将两个表的数据按照一定的查询条件查询出来后，将结果合并到一起显示出来。关键字是 UNION 和 UNION ALL。
UNION ALL 是表示全部记录，包括了多个查询结果的重复记录。如果希望去掉多个查询结果的重复记录，使用 UNION 关键字。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tb_name1 [<span style=color:#66d9ef>WHERE</span> condition]
</span></span><span style=display:flex><span><span style=color:#66d9ef>UNION</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>UNION</span> <span style=color:#66d9ef>ALL</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tb_name2 [<span style=color:#66d9ef>WHERE</span> condition]
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#66d9ef>UNION</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>UNION</span> <span style=color:#66d9ef>ALL</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tb_namen [<span style=color:#66d9ef>WHERE</span> condition]
</span></span></code></pre></div><p>#权限控制
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>GRANT</span> <span style=color:#66d9ef>all</span> <span style=color:#66d9ef>ON</span> db_name.tb_name <span style=color:#66d9ef>TO</span> <span style=color:#e6db74>&#39;user_name&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;host_name&#39;</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>REVOKE</span> <span style=color:#66d9ef>all</span> <span style=color:#66d9ef>ON</span> db_name.tb_name <span style=color:#66d9ef>FROM</span> <span style=color:#e6db74>&#39;user_name&#39;</span><span style=color:#f92672>@</span><span style=color:#e6db74>&#39;host_name&#39;</span>;
</span></span></code></pre></div><blockquote><p>这些语句主要是 DBA 用于管理系统中的对象权限</p></blockquote><p>#执行顺序</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>from</span><span style=color:#960050;background-color:#1e0010>…</span> <span style=color:#66d9ef>where</span><span style=color:#960050;background-color:#1e0010>…</span><span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span><span style=color:#960050;background-color:#1e0010>…</span><span style=color:#66d9ef>having</span><span style=color:#960050;background-color:#1e0010>…</span>.  <span style=color:#66d9ef>select</span> <span style=color:#960050;background-color:#1e0010>…</span> <span style=color:#66d9ef>order</span> <span style=color:#66d9ef>by</span><span style=color:#960050;background-color:#1e0010>…</span>
</span></span></code></pre></div><p>#HAVING</p><blockquote><p>HAVING语句通常与GROUP BY语句联合使用，用来过滤由GROUP BY语句返回的记录集。
HAVING语句的存在弥补了WHERE关键字不能与聚合函数联合使用的不足。</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> column1, column2, ... column_n, aggregate_function (expression)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> tables
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> predicates
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> column1, column2, ... column_n
</span></span><span style=display:flex><span><span style=color:#66d9ef>HAVING</span> condition1 ... condition_n;
</span></span></code></pre></div><p>#判断字符串中是否存在某个字符串</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#e6db74>&#34;FIND_IN_SET($port,port)&#34;</span> <span style=color:#f92672>//</span><span style=color:#960050;background-color:#1e0010>判断</span>port字段是否有$port <span style=color:#960050;background-color:#1e0010>如</span> <span style=color:#ae81ff>12</span><span style=color:#960050;background-color:#1e0010>是否在</span>(<span style=color:#ae81ff>12</span>,<span style=color:#ae81ff>23</span>,<span style=color:#ae81ff>24</span>,<span style=color:#ae81ff>25</span>)<span style=color:#960050;background-color:#1e0010>当中</span>
</span></span><span style=display:flex><span><span style=color:#f92672>//</span>laravel写法
</span></span><span style=display:flex><span><span style=color:#f92672>-&gt;</span>whereRaw(<span style=color:#e6db74>&#34;FIND_IN_SET($port,port)&#34;</span>)
</span></span></code></pre></div><h1 id=实例>实例</h1><p>用到关联、合并名称、判断流程等</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>SELECT</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>order_sn</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>订单号</span>,
</span></span><span style=display:flex><span>	( <span style=color:#a6e22e>SELECT</span> <span style=color:#a6e22e>group_concat</span>( <span style=color:#a6e22e>g</span><span style=color:#f92672>.</span><span style=color:#a6e22e>goods_name</span> ) <span style=color:#a6e22e>FROM</span> <span style=color:#a6e22e>zsp_order_goods</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>g</span> <span style=color:#a6e22e>WHERE</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>g</span><span style=color:#f92672>.</span><span style=color:#a6e22e>main_order_id</span> ) <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>商品名称</span>
</span></span><span style=display:flex><span>	,(
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>SELECT</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>group_concat</span>( <span style=color:#a6e22e>g</span><span style=color:#f92672>.</span><span style=color:#a6e22e>goods_cat_name</span> ) 
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>FROM</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>zsp_order_goods</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>g</span> 
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>WHERE</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>g</span><span style=color:#f92672>.</span><span style=color:#a6e22e>main_order_id</span> 
</span></span><span style=display:flex><span>			) <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>商品分类</span>
</span></span><span style=display:flex><span>			,(
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>SELECT</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>group_concat</span>( <span style=color:#a6e22e>g</span><span style=color:#f92672>.</span><span style=color:#a6e22e>brand_name</span> ) 
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>FROM</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>zsp_order_goods</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>g</span> 
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>WHERE</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>g</span><span style=color:#f92672>.</span><span style=color:#a6e22e>main_order_id</span> 
</span></span><span style=display:flex><span>		) <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>品牌</span>, 
</span></span><span style=display:flex><span>	(
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>CASE</span>
</span></span><span style=display:flex><span>			
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>WHEN</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>order_status</span> <span style=color:#a6e22e>BETWEEN</span> <span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>AND</span> <span style=color:#ae81ff>14</span> <span style=color:#a6e22e>THEN</span>
</span></span><span style=display:flex><span>				<span style=color:#e6db74>&#39;待付款&#39;</span> 
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>WHEN</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>order_status</span> <span style=color:#a6e22e>BETWEEN</span> <span style=color:#ae81ff>15</span> 
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>AND</span> <span style=color:#ae81ff>24</span> <span style=color:#a6e22e>THEN</span>
</span></span><span style=display:flex><span>					<span style=color:#e6db74>&#39;待发货&#39;</span> 
</span></span><span style=display:flex><span>					<span style=color:#a6e22e>WHEN</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>order_status</span> <span style=color:#a6e22e>BETWEEN</span> <span style=color:#ae81ff>25</span> 
</span></span><span style=display:flex><span>					<span style=color:#66d9ef>AND</span> <span style=color:#ae81ff>79</span> <span style=color:#a6e22e>THEN</span>
</span></span><span style=display:flex><span>						<span style=color:#e6db74>&#39;待收货&#39;</span> 
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>WHEN</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>order_status</span> <span style=color:#a6e22e>BETWEEN</span> <span style=color:#ae81ff>80</span> 
</span></span><span style=display:flex><span>						<span style=color:#66d9ef>AND</span> <span style=color:#ae81ff>82</span> <span style=color:#a6e22e>THEN</span>
</span></span><span style=display:flex><span>							<span style=color:#e6db74>&#39;已完成&#39;</span> 
</span></span><span style=display:flex><span>							<span style=color:#a6e22e>WHEN</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>order_status</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>84</span> <span style=color:#a6e22e>THEN</span>
</span></span><span style=display:flex><span>							<span style=color:#e6db74>&#39;已关闭&#39;</span> 
</span></span><span style=display:flex><span>							<span style=color:#a6e22e>WHEN</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>order_status</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>90</span> <span style=color:#a6e22e>THEN</span>
</span></span><span style=display:flex><span>							<span style=color:#e6db74>&#39;已删除&#39;</span> 
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>END</span> 
</span></span><span style=display:flex><span>						) <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>订单状态</span>,
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pay_price</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>订单金额</span>,
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>FROM_UNIXTIME</span>(<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>create_time</span>, <span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>下单时间</span>,
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>user_id</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>会员ID</span>,
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>u</span><span style=color:#f92672>.</span><span style=color:#a6e22e>nick_name</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>会员名称</span>,
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>l</span><span style=color:#f92672>.</span><span style=color:#a6e22e>level_name</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>会员等级</span>,
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>u</span><span style=color:#f92672>.</span><span style=color:#a6e22e>parent_id</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>上级ID</span>,
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>p</span><span style=color:#f92672>.</span><span style=color:#a6e22e>nick_name</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>上级名称</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>					<span style=color:#a6e22e>FROM</span>
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>zsp_order</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>o</span>
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>left</span> <span style=color:#a6e22e>JOIN</span> <span style=color:#a6e22e>zsp_users</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>u</span> <span style=color:#a6e22e>ON</span> <span style=color:#a6e22e>u</span><span style=color:#f92672>.</span><span style=color:#a6e22e>uid</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>user_id</span>
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>left</span> <span style=color:#a6e22e>JOIN</span> <span style=color:#a6e22e>zsp_users_level</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>l</span> <span style=color:#a6e22e>ON</span> <span style=color:#a6e22e>l</span><span style=color:#f92672>.</span><span style=color:#a6e22e>id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>u</span><span style=color:#f92672>.</span><span style=color:#a6e22e>user_level_id</span> 
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>left</span> <span style=color:#a6e22e>JOIN</span> <span style=color:#a6e22e>zsp_users</span> <span style=color:#66d9ef>AS</span> <span style=color:#a6e22e>p</span> <span style=color:#a6e22e>ON</span> <span style=color:#a6e22e>u</span><span style=color:#f92672>.</span><span style=color:#a6e22e>parent_id</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>p</span><span style=color:#f92672>.</span><span style=color:#a6e22e>uid</span>
</span></span><span style=display:flex><span>					<span style=color:#a6e22e>WHERE</span>
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>shop_uid</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span> 
</span></span><span style=display:flex><span>					<span style=color:#a6e22e>ORDER</span> <span style=color:#a6e22e>BY</span>
</span></span><span style=display:flex><span>						<span style=color:#a6e22e>o</span><span style=color:#f92672>.</span><span style=color:#a6e22e>id</span> 
</span></span></code></pre></div><h1 id=shell-脚本中执行mysql命令>shell 脚本中执行mysql命令</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#/bin/sh</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>HOSTNAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;127.0.0.1&#34;</span>
</span></span><span style=display:flex><span>PORT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;3306&#34;</span>
</span></span><span style=display:flex><span>USERNAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mylinux&#34;</span>
</span></span><span style=display:flex><span>PASSWORD<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mylinux&#34;</span>
</span></span><span style=display:flex><span>DBNAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;mylinux&#34;</span>
</span></span><span style=display:flex><span>TABLENAME<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;test&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#创建数据库</span>
</span></span><span style=display:flex><span>create_db_sql<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;create database IF NOT EXISTS </span><span style=color:#e6db74>${</span>DBNAME<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>mysql -h<span style=color:#e6db74>${</span>HOSTNAME<span style=color:#e6db74>}</span> -P<span style=color:#e6db74>${</span>PORT<span style=color:#e6db74>}</span> -u<span style=color:#e6db74>${</span>USERNAME<span style=color:#e6db74>}</span> -p<span style=color:#e6db74>${</span>PASSWORD<span style=color:#e6db74>}</span> -e<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>create_db_sql<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#创建表</span>
</span></span><span style=display:flex><span>create_table_sql<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;create table IF NOT EXISTS </span><span style=color:#e6db74>${</span>TABLENAME<span style=color:#e6db74>}</span><span style=color:#e6db74> (name varchar(20),id int(11) default 0 )&#34;</span>
</span></span><span style=display:flex><span>mysql -h<span style=color:#e6db74>${</span>HOSTNAME<span style=color:#e6db74>}</span> -P<span style=color:#e6db74>${</span>PORT<span style=color:#e6db74>}</span> -u<span style=color:#e6db74>${</span>USERNAME<span style=color:#e6db74>}</span> -p<span style=color:#e6db74>${</span>PASSWORD<span style=color:#e6db74>}</span> <span style=color:#e6db74>${</span>DBNAME<span style=color:#e6db74>}</span> -e<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>create_table_sql<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#插入数据</span>
</span></span><span style=display:flex><span>insert_sql<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;insert into </span><span style=color:#e6db74>${</span>TABLENAME<span style=color:#e6db74>}</span><span style=color:#e6db74> values(&#39;billchen&#39;,2)&#34;</span>
</span></span><span style=display:flex><span>mysql -h<span style=color:#e6db74>${</span>HOSTNAME<span style=color:#e6db74>}</span> -P<span style=color:#e6db74>${</span>PORT<span style=color:#e6db74>}</span> -u<span style=color:#e6db74>${</span>USERNAME<span style=color:#e6db74>}</span> -p<span style=color:#e6db74>${</span>PASSWORD<span style=color:#e6db74>}</span> <span style=color:#e6db74>${</span>DBNAME<span style=color:#e6db74>}</span> -e<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>insert_sql<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>