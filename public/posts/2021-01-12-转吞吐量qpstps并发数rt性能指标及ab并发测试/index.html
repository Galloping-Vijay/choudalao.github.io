<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>【转】吞吐量、QPS（TPS）、并发数、RT性能指标及ab并发测试 - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="吞吐量、QPS（TPS）、并发数、RT性能指标理解"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/post/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>【转】吞吐量、QPS（TPS）、并发数、RT性能指标及ab并发测试</h1></header><div class="content post__content clearfix"><h1 id=概念>概念</h1><h3 id=吞吐量>吞吐量</h3><p>系统的吞吐量是指系统的抗压、负载能力，指的是单位时间内处理的请求数量。通常情况下，吞吐率用 “字节数/秒” 来衡量，也可以用 “请求数/秒”，“页面数/秒”，其实，不管是一个请求还是一个页面，本质都是网络上传输的数据，那么表示数据的单位就是字节数。</p><p>系统吞吐量的几个重要参数：QPS（TPS），并发数，响应时间等，系统的吞吐量通常由这几个参数值来决定。</p><h3 id=吞吐率requests-per-second>吞吐率（Requests per second）</h3><p>服务器并发处理能力的量化描述，单位是reqs/s，指的是在某个并发用户数下单位时间内处理的请求数。某个并发用户数下单位时间内能处理的最大请求数，称之为最大吞吐率。</p><p>记住：吞吐率是基于并发用户数的。这句话代表了两个含义：</p><p>a、吞吐率和并发用户数相关</p><p>b、不同的并发用户数下，吞吐率一般是不同的</p><p>计算公式：总请求数/处理完成这些请求数所花费的时间，即</p><p>Request per second=Complete requests/Time taken for tests</p><h6 id=必须要说明的是这个数值表示当前机器的整体性能值越大越好>必须要说明的是，这个数值表示当前机器的整体性能，值越大越好。</h6><h3 id=qps>QPS</h3><p>Queries Per Second，每秒查询数，即是每秒能够响应的查询次数，注意这里的查询是指用户发出请求到服务器做出响应成功的次数，简单理解可以认为查询=请求request</p><p>qps = 每秒钟request数量</p><h3 id=tps>TPS</h3><p>Transactions Per Second ，每秒处理的事务数。一个事务是指一个客户机向服务器发送请求然后服务器做出反应的过程。客户机在发送请求时开始计时，收到服务器响应后结束计时，以此来计算使用的时间和完成的事务个数。
针对单接口而言，TPS可以认为是等价于QPS的，比如访问一个页面/index.html，是一个TPS，而访问/index.html页面可能请求了3次服务器比如css、js、index接口，产生了3个QPS。</p><p>tps = 每秒钟事务数量</p><h3 id=并发数>并发数</h3><p>并发数是指系统同时能处理的请求数量，反映了系统的负载能力。</p><p>并发数 = 系统同时处理的request/事务数</p><h3 id=响应时间rt>响应时间RT</h3><p>Response Time，简单理解为系统从输入到输出的时间间隔，宽泛的来说，代表从客户端发起请求到服务端接收到请求并响应所有数据的时间差。一般取平均响应时间。</p><h3 id=qpsrt并发数三者关系>QPS，RT，并发数三者关系</h3><p>QPS = 并发数 / 评价响应时间</p><p>一个系统吞吐量通常由QPS（TPS）、并发数两个因素决定，每套系统这两个值都有一个相对极限值，在应用场景访问压力下，只要某一项达到系统最高值，系统的吞吐量就上不去了，如果压力继续增大，系统的吞吐量反而会下降，原因是系统超负荷工作，上下文切换、内存等等其它消耗导致系统性能下降。</p><h1 id=ab测试>ab测试</h1><h3 id=ab操作说明>ab操作说明</h3><h4 id=介绍>介绍</h4><p>ab是apache bench的简称，是apache提供的压力测试工具。</p><h4 id=说明>说明</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>ab</span> [<span style=color:#a6e22e>options</span>] [<span style=color:#a6e22e>http</span><span style=color:#f92672>://</span>]<span style=color:#a6e22e>hostname</span>[<span style=color:#f92672>:</span><span style=color:#a6e22e>port</span>]<span style=color:#f92672>/</span><span style=color:#a6e22e>path</span>
</span></span></code></pre></div><h5 id=options>options</h5><p>命令其余请参见 <a href=http://apache.jz123.cn/programs/ab.html>http://apache.jz123.cn/programs/ab.html</a></p><h5 id=发起总请求数-n>发起总请求数：-n</h5><p>-n1000 //代表本次测试发起1000个请求</p><h5 id=请求并发数-c>请求并发数：-c</h5><p>-c1000 代表每次都同时发起1000次请求,也就是并发数为1000</p><h5 id=本次测试的最大秒速默认没有限制-t>本次测试的最大秒速,默认没有限制：-t</h5><p>-t10 代表10秒后就结束测试</p><h5 id=每次请求的超时时间默认为30-s>每次请求的超时时间,默认为30：-s</h5><p>-s30 代表每个请求如果超时30秒,则直接代表该请求超时</p><h5 id=包含需要post的文件地址一般和-t一起使用-p>包含需要post的文件地址,一般和-T一起使用：-p</h5><h5 id=post数据所使用的content-type头信息-t>POST数据所使用的Content-type头信息：-T</h5><p>栗子：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>ab</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>c100</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>n10000</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>p</span> <span style=color:#a6e22e>index</span><span style=color:#f92672>.</span><span style=color:#a6e22e>txt</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>T</span> <span style=color:#e6db74>&#34;application/x-www-form-urlencoded&#34;</span>  <span style=color:#a6e22e>http</span><span style=color:#f92672>://</span><span style=color:#a6e22e>dev</span><span style=color:#f92672>.</span><span style=color:#a6e22e>host</span><span style=color:#f92672>.</span><span style=color:#a6e22e>net</span><span style=color:#f92672>/</span>
</span></span></code></pre></div><p>index.txt 里面是请求参数：如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>username</span><span style=color:#f92672>=</span><span style=color:#a6e22e>choudalao</span><span style=color:#f92672>&amp;</span><span style=color:#a6e22e>pwd</span><span style=color:#f92672>=</span><span style=color:#ae81ff>123456</span>
</span></span></code></pre></div><h5 id=显示请求的显示详细程度默认是只显示上面已完成请求数等-v>显示请求的显示详细程度,默认是只显示上面已完成请求数等：-v</h5><p>-v1 默认值为1,只显示请求的总统计
-v2 显示响应头,响应数据,并包含1的显示
-v3 显示响应状态码,并包含2的显示
-v4 显示更多信息</p><h5 id=添加cookie-c>添加cookie：-C</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>-</span><span style=color:#a6e22e>C</span> <span style=color:#e6db74>&#34;cookie1=cookie1,cookie2=cookie2&#34;</span>
</span></span></code></pre></div><h5 id=以html表格的元素显示ab的测试结果-w>以html表格的元素显示ab的测试结果：-w</h5><h2 id=测试栗子及说明>测试栗子及说明</h2><p>命令：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>ab</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>c1000</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>n100000</span> <span style=color:#a6e22e>http</span><span style=color:#f92672>://</span><span style=color:#a6e22e>dev</span><span style=color:#f92672>.</span><span style=color:#a6e22e>host</span><span style=color:#f92672>.</span><span style=color:#a6e22e>net</span><span style=color:#f92672>/</span>
</span></span></code></pre></div><p>结果：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>This</span> <span style=color:#a6e22e>is</span> <span style=color:#a6e22e>ApacheBench</span>, <span style=color:#a6e22e>Version</span> <span style=color:#ae81ff>2.3</span> <span style=color:#f92672>&lt;</span>$Revision<span style=color:#f92672>:</span> <span style=color:#ae81ff>1843412</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Copyright</span> <span style=color:#ae81ff>1996</span> <span style=color:#a6e22e>Adam</span> <span style=color:#a6e22e>Twiss</span>, <span style=color:#a6e22e>Zeus</span> <span style=color:#a6e22e>Technology</span> <span style=color:#a6e22e>Ltd</span>, <span style=color:#a6e22e>http</span><span style=color:#f92672>://</span><span style=color:#a6e22e>www</span><span style=color:#f92672>.</span><span style=color:#a6e22e>zeustech</span><span style=color:#f92672>.</span><span style=color:#a6e22e>net</span><span style=color:#f92672>/</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Licensed</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>The</span> <span style=color:#a6e22e>Apache</span> <span style=color:#a6e22e>Software</span> <span style=color:#a6e22e>Foundation</span>, <span style=color:#a6e22e>http</span><span style=color:#f92672>://</span><span style=color:#a6e22e>www</span><span style=color:#f92672>.</span><span style=color:#a6e22e>apache</span><span style=color:#f92672>.</span><span style=color:#a6e22e>org</span><span style=color:#f92672>/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Benchmarking</span> <span style=color:#a6e22e>dev</span><span style=color:#f92672>.</span><span style=color:#a6e22e>host</span><span style=color:#f92672>.</span><span style=color:#a6e22e>net</span> (<span style=color:#a6e22e>be</span> <span style=color:#a6e22e>patient</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>10000</span> <span style=color:#a6e22e>requests</span> <span style=color:#75715e>#已经完成的请求数
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>20000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>30000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>40000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>50000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>60000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>70000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>80000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>90000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Completed</span> <span style=color:#ae81ff>100000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Finished</span> <span style=color:#ae81ff>100000</span> <span style=color:#a6e22e>requests</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Server</span> <span style=color:#a6e22e>Software</span><span style=color:#f92672>:</span>        <span style=color:#a6e22e>nginx</span><span style=color:#f92672>/</span><span style=color:#ae81ff>1.15</span><span style=color:#f92672>.</span><span style=color:#ae81ff>11</span> <span style=color:#75715e># nginx 版本（服务器名称）
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Server</span> <span style=color:#a6e22e>Hostname</span><span style=color:#f92672>:</span>        <span style=color:#a6e22e>dev</span><span style=color:#f92672>.</span><span style=color:#a6e22e>host</span><span style=color:#f92672>.</span><span style=color:#a6e22e>net</span> <span style=color:#75715e>#请求的URL主机名
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Server</span> <span style=color:#a6e22e>Port</span><span style=color:#f92672>:</span>            <span style=color:#ae81ff>80</span> <span style=color:#75715e>#端口号
</span></span></span><span style=display:flex><span><span style=color:#75715e># SSL/TLS Protocol: TLSv1.2,ECDHE-RSA-AES256-GCM-SHA384,2048,256 //SSL/TLS 协议
</span></span></span><span style=display:flex><span><span style=color:#75715e># TLS Server Name: youxi.test # TLS服务器名
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Document</span> <span style=color:#a6e22e>Path</span><span style=color:#f92672>:</span>          <span style=color:#f92672>/</span> <span style=color:#75715e>#请求路径
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Document</span> <span style=color:#a6e22e>Length</span><span style=color:#f92672>:</span>        <span style=color:#ae81ff>327</span> <span style=color:#a6e22e>bytes</span> <span style=color:#75715e>#响应数据长度
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Concurrency</span> <span style=color:#a6e22e>Level</span><span style=color:#f92672>:</span>      <span style=color:#ae81ff>1000</span> <span style=color:#75715e>#并发数,我们自己设置的-c参数
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Time</span> <span style=color:#a6e22e>taken</span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>tests</span><span style=color:#f92672>:</span>   <span style=color:#ae81ff>260.292</span> <span style=color:#a6e22e>seconds</span> <span style=color:#75715e>#请求完成时间
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Complete</span> <span style=color:#a6e22e>requests</span><span style=color:#f92672>:</span>      <span style=color:#ae81ff>100000</span> <span style=color:#75715e>#完成请求数
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Failed</span> <span style=color:#a6e22e>requests</span><span style=color:#f92672>:</span>        <span style=color:#ae81ff>96673</span> <span style=color:#75715e>#错误请求数
</span></span></span><span style=display:flex><span>   (<span style=color:#a6e22e>Connect</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>Receive</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>Length</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>96673</span>, <span style=color:#a6e22e>Exceptions</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>0</span>)  
</span></span><span style=display:flex><span><span style=color:#a6e22e>Non</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span><span style=color:#a6e22e>xx</span> <span style=color:#a6e22e>responses</span><span style=color:#f92672>:</span>      <span style=color:#ae81ff>95644</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>Total</span> <span style=color:#a6e22e>transferred</span><span style=color:#f92672>:</span>      <span style=color:#ae81ff>31248236</span> <span style=color:#a6e22e>bytes</span>  <span style=color:#75715e>#整个场景中的网络传输量
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>HTML</span> <span style=color:#a6e22e>transferred</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>16095964</span> <span style=color:#a6e22e>bytes</span> <span style=color:#75715e>#html响应总长度(去除了响应头的长度)
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Requests</span> <span style=color:#a6e22e>per</span> <span style=color:#a6e22e>second</span><span style=color:#f92672>:</span>    <span style=color:#ae81ff>384.18</span> [<span style=color:#75715e>#/sec] (mean)  #每秒处理的请求数，相当于 LR 中的 每秒事务数 ，后面括号中的 mean 表示这是一个平均值
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Time</span> <span style=color:#a6e22e>per</span> <span style=color:#a6e22e>request</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>2602.921</span> [<span style=color:#a6e22e>ms</span>] (<span style=color:#a6e22e>mean</span>) <span style=color:#75715e>#用户平均请求等待时间，相当于 LR 中的 平均事务响应时间 ，后面括号中的 mean 表示这是一个平均值
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Time</span> <span style=color:#a6e22e>per</span> <span style=color:#a6e22e>request</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>2.603</span> [<span style=color:#a6e22e>ms</span>] (<span style=color:#a6e22e>mean</span>, <span style=color:#a6e22e>across</span> <span style=color:#a6e22e>all</span> <span style=color:#a6e22e>concurrent</span> <span style=color:#a6e22e>requests</span>)  <span style=color:#75715e>#服务器平均处理时间
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>Transfer</span> <span style=color:#a6e22e>rate</span><span style=color:#f92672>:</span>          <span style=color:#ae81ff>117.24</span> [<span style=color:#a6e22e>Kbytes</span><span style=color:#f92672>/</span><span style=color:#a6e22e>sec</span>] <span style=color:#a6e22e>received</span> <span style=color:#75715e>#带宽传输速度，可以帮助排除是否存在网络流量过大导致响应时间延长的问题
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Connection</span> <span style=color:#a6e22e>Times</span> (<span style=color:#a6e22e>ms</span>)
</span></span><span style=display:flex><span>              <span style=color:#a6e22e>min</span>  <span style=color:#a6e22e>mean</span>[<span style=color:#f92672>+/-</span><span style=color:#a6e22e>sd</span>] <span style=color:#a6e22e>median</span>   <span style=color:#a6e22e>max</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Connect</span><span style=color:#f92672>:</span>        <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>2</span>  <span style=color:#ae81ff>33.0</span>      <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>507</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Processing</span><span style=color:#f92672>:</span>  <span style=color:#ae81ff>1006</span> <span style=color:#ae81ff>2556</span> <span style=color:#ae81ff>283.2</span>   <span style=color:#ae81ff>2397</span>    <span style=color:#ae81ff>4679</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Waiting</span><span style=color:#f92672>:</span>     <span style=color:#ae81ff>1005</span> <span style=color:#ae81ff>1865</span> <span style=color:#ae81ff>454.6</span>   <span style=color:#ae81ff>1789</span>    <span style=color:#ae81ff>4668</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Total</span><span style=color:#f92672>:</span>       <span style=color:#ae81ff>1008</span> <span style=color:#ae81ff>2559</span> <span style=color:#ae81ff>284.0</span>   <span style=color:#ae81ff>2397</span>    <span style=color:#ae81ff>4679</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Percentage</span> <span style=color:#a6e22e>of</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>requests</span> <span style=color:#a6e22e>served</span> <span style=color:#a6e22e>within</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>certain</span> <span style=color:#a6e22e>time</span> (<span style=color:#a6e22e>ms</span>)
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>50</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>2397</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>66</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>2842</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>75</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>2864</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>80</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>2874</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>90</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>2909</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>95</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>2948</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>98</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>2992</span>
</span></span><span style=display:flex><span>  <span style=color:#ae81ff>99</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>3014</span>
</span></span><span style=display:flex><span> <span style=color:#ae81ff>100</span><span style=color:#f92672>%</span>   <span style=color:#ae81ff>4679</span> (<span style=color:#a6e22e>longest</span> <span style=color:#a6e22e>request</span>)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e># 整个场景中所有请求的响应情况。在场景中每个请求都有一个响应时间，其中50％的用户响应时间小于2397 毫秒，66％ 的用户响应时间小于2842 毫秒，最大的响应时间小于4679 毫秒
</span></span></span></code></pre></div><p>测试结果显示：nginx吞吐率为：Requests per second: 384.18 [#/sec] (mean)。</p><p>通过上面的数据可分析出服务器响应情况,并发处理能力,尤其是<code>Requests per second </code>参数,它确定了服务器的秒并发能力。</p><h6 id=性能指标requests-per-second吞吐率越高服务器性能越好>性能指标<code>Requests per second</code>吞吐率越高，服务器性能越好。</h6><h2 id=查看服务器相关数据>查看服务器相关数据</h2><h5 id=查看web服务器nginxapache的并发请求数及其tcp连接状态>查看Web服务器（Nginx Apache）的并发请求数及其TCP连接状态：   </h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span>  <span style=color:#a6e22e>netstat</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>n</span> <span style=color:#f92672>|</span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;/^tcp/ {++S[$NF]}END{for(a in S)print a,S[a]}&#39;</span>
</span></span></code></pre></div><p>或者</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>netstat </span><span style=color:#f92672>-</span><span style=color:#a6e22e>n</span><span style=color:#f92672>|</span><span style=color:#a6e22e>grep  </span><span style=color:#f92672>^</span><span style=color:#a6e22e>tcp</span><span style=color:#f92672>|</span><span style=color:#a6e22e>awk </span><span style=color:#e6db74>&#39;{print $NF}&#39;</span><span style=color:#f92672>|</span><span style=color:#a6e22e>sort </span><span style=color:#f92672>-</span><span style=color:#a6e22e>nr</span><span style=color:#f92672>|</span><span style=color:#a6e22e>uniq </span><span style=color:#f92672>-</span><span style=color:#a6e22e>c   </span>
</span></span></code></pre></div><p>或者：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>netstat</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>n</span> <span style=color:#f92672>|</span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;/^tcp/ {++state[$NF]} END {for(key in state) print key,&#34;t&#34;,state[key]}&#39;</span>
</span></span></code></pre></div><p>返回结果一般如下：   
*LAST_ACK 5 （正在等待处理的请求数）
ESTABLISHED 1597 （正常数据传输状态） FIN_WAIT1 51 FIN_WAIT2 504 
TIME_WAIT 1057 （处理完毕，等待超时结束的请求数）   *</p><blockquote><p>其他参数说明：   
CLOSED：无连接是活动的或正在进行
LISTEN：服务器在等待进入呼叫 
SYN_RECV：一个连接请求已经到达，等待确认
SYN_SENT：应用已经开始，打开一个连接 
ESTABLISHED：正常数据传输状态 
FIN_WAIT1：应用说它已经完成 
FIN_WAIT2：另一边已同意释放 
ITMED_WAIT：等待所有分组死掉 
CLOSING：两边同时尝试关闭 
TIME_WAIT：另一边已初始化一个释放 
LAST_ACK：等待所有分组死掉 LAST_ACK 5 （正在等待处理的请求数）
ESTABLISHED 1597 （正常数据传输状态） FIN_WAIT1 51 FIN_WAIT2 504 
TIME_WAIT 1057 （处理完毕，等待超时结束的请求数）   </p></blockquote><h5 id=查看nginx运行进程数>查看Nginx运行进程数 </h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>ps</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>ef</span> <span style=color:#f92672>|</span><span style=color:#a6e22e>grep</span> <span style=color:#a6e22e>nginx</span><span style=color:#f92672>|</span><span style=color:#a6e22e>wc</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>l</span>
</span></span></code></pre></div><h5 id=返回的数字就是nginx的运行进程数如果是apache则执行>返回的数字就是nginx的运行进程数，如果是apache则执行 </h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span> <span style=color:#a6e22e>ps</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>ef</span> <span style=color:#f92672>|</span><span style=color:#a6e22e>grep</span> <span style=color:#a6e22e>httpd</span><span style=color:#f92672>|</span><span style=color:#a6e22e>wc</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>l</span>
</span></span></code></pre></div><h5 id=查看web服务器进程连接数>查看Web服务器进程连接数： </h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>netstat</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>antp</span><span style=color:#f92672>|</span><span style=color:#a6e22e>grep</span> <span style=color:#ae81ff>80</span><span style=color:#f92672>|</span><span style=color:#a6e22e>grep</span> <span style=color:#a6e22e>ESTABLISH</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>c</span>
</span></span></code></pre></div><p>#####查看MySQL进程连接数：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>ps</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>axef</span><span style=color:#f92672>|</span><span style=color:#a6e22e>grep</span> <span style=color:#a6e22e>mysqld</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>c</span>
</span></span></code></pre></div></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>