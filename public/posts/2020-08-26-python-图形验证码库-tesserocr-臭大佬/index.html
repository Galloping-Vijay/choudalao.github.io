<!DOCTYPE html>
<html class="no-js" lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 图形验证码库 tesserocr | 臭大佬 - 臭大佬博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Python 图形验证码库 tesserocr">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="臭大佬博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">臭大佬博客</div>
					
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">菜单</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">首页</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/post/">
				
				<span class="menu__text">归档</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">关于</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 图形验证码库 tesserocr | 臭大佬</h1>
			
		</header>
		<div class="content post__content clearfix">
			<h1 id="用途">用途</h1>
<p>对于验证码，我们可以使用OCR技术来将其转化为电子文本，然后爬虫将识别结果提交给服务器，便可以达到自动识别验证码的过程。</p>
<h1 id="概念">概念</h1>
<h4 id="ocr">OCR</h4>
<p>OCR,全称叫 Optical Character Recognition，中文翻译叫光学字符识别，是指通过扫描字符，通过其形状将其翻译成电子文本的过程；</p>
<h4 id="tesseract">tesseract</h4>
<p>tesseract是google开源的OCR</p>
<h1 id="安装">安装</h1>
<h2 id="win10">WIN10</h2>
<p>tesserocr需要安装tessoract依赖库，所以安装tesserocr前需要安装tessoract。
tesseract下载地址：https://digi.bib.uni-mannheim.de/tesseract/，（可能需要爬墙哦）</p>
<p><img src="https://www.choudalao.com/uploads/20200826/20200826225535YmrFLg.png" alt=""></p>
<p><img src="https://www.choudalao.com/uploads/20200826/20200826225645kE2GFU.png" alt=""></p>
<p>然后安装到这一步注意要勾选这一项来安装OCR识别支持的语言包，这样OCR就可以识别多国语言，然后就可以一直点击下一步完成安装。
<img src="https://www.choudalao.com/uploads/20200826/20200826225754j99Pxk.png" alt="">
<img src="https://www.choudalao.com/uploads/20200826/202008262259544OXEpY.png" alt=""></p>
<p>如何验证tesseract是否安装成功？直接cmd下输入tesseract即可；
<img src="https://www.choudalao.com/uploads/20200826/202008262323069diT2V.png" alt=""></p>
<p>如果提示&rsquo;tesseract&rsquo; 不是内部或外部命令，则是因为没有配置环境变量，手动把tesseract根目录配置到path参数下即可</p>
<p><img src="https://www.choudalao.com/uploads/20200826/20200826232351owNpfT.png" alt=""></p>
<p>重启cmd控制台，再次输入tesseract；</p>
<p><img src="https://www.choudalao.com/uploads/20200826/20200826232431JayACI.png" alt=""></p>
<h5 id="安装-tesserocr">安装 tesserocr</h5>
<p>windows不能用pip install tesserocr所以我这里是安装.whl文件，下载地址：https://github.com/simonflueckiger/tesserocr-windows_build/releases</p>
<p><img src="https://www.choudalao.com/uploads/20200826/20200826234447RkfPpb.png" alt=""></p>
<p>把下载好的xxx.whl文件放在python安装目录下的\Lib\site-packages文件夹里面，进入该目录下，然后在这里打开cmd，输入命令pip install  xxx.whl</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>pip install tesserocr<span style="color:#f92672">-</span><span style="color:#ae81ff">2.4.0</span><span style="color:#f92672">-</span>cp36<span style="color:#f92672">-</span>cp36m<span style="color:#f92672">-</span>win_amd64<span style="color:#f92672">.</span>whl
</span></span></code></pre></div><p><img src="https://www.choudalao.com/uploads/20200826/20200826235345uvcHXG.png" alt=""></p>
<p>在运行过程中，我们还需要更新<code>pip</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>pip install <span style="color:#f92672">--</span>upgrade pip
</span></span></code></pre></div><p><img src="https://www.choudalao.com/uploads/20200826/2020082623544804F02C.png" alt=""></p>
<h4 id="运行代码">运行代码</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> tesserocr
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> Image
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 新建Image对象</span>
</span></span><span style="display:flex;"><span>image <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>open(<span style="color:#e6db74">&#34;./code_img/veriCode (1).do&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 进行置灰处理</span>
</span></span><span style="display:flex;"><span>image <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>convert(<span style="color:#e6db74">&#39;L&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 这个是二值化阈值</span>
</span></span><span style="display:flex;"><span>threshold <span style="color:#f92672">=</span> <span style="color:#ae81ff">150</span>
</span></span><span style="display:flex;"><span>table <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">256</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> i <span style="color:#f92672">&lt;</span> threshold:
</span></span><span style="display:flex;"><span>        table<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        table<span style="color:#f92672">.</span>append(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 通过表格转换成二进制图片，1的作用是白色，不然就全部黑色了</span>
</span></span><span style="display:flex;"><span>image <span style="color:#f92672">=</span> image<span style="color:#f92672">.</span>point(table, <span style="color:#e6db74">&#34;1&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#75715e">#image.show()</span>
</span></span><span style="display:flex;"><span>result <span style="color:#f92672">=</span> tesserocr<span style="color:#f92672">.</span>image_to_text(image)
</span></span><span style="display:flex;"><span>print(result)
</span></span></code></pre></div><p><img src="https://www.choudalao.com/uploads/20200826/20200826235928X0JOqj.png" alt=""></p>
<p>运行时有一个报错信息</p>
<blockquote>
<p>RuntimeError: Failed to init API, possibly an invalid tessdata path: D:\Program Files\Anaconda3\envs\tensorflow/tessdata/</p>
</blockquote>
<p>只要把刚才安装的tesseract下面的tessdata文件夹复制到python的安装路径里（与lib文件夹同级）,也就是报错报的地址处。</p>
<p><img src="https://www.choudalao.com/uploads/20200827/2020082700094834VJxK.png" alt=""></p>
<p>再次执行：</p>
<p><img src="https://www.choudalao.com/uploads/20200827/20200827001133ZUnY8h.png" alt=""></p>
<p>可以获取得到验证码内容了。</p>

		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2026 臭大佬博客.
			<span class="footer__copyright-credits">基于 <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> 引擎和 <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> 主题</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>