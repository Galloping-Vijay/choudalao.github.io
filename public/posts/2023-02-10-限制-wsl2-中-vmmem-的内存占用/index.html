<!DOCTYPE html>
<html class="no-js" lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>限制 WSL2 中 Vmmem 的内存占用 - 臭大佬博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="vmmem内存占用大，如何限制内存占用？">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="臭大佬博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">臭大佬博客</div>
					
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">菜单</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">首页</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/post/">
				
				<span class="menu__text">归档</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">关于</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">限制 WSL2 中 Vmmem 的内存占用</h1>
			
		</header>
		<div class="content post__content clearfix">
			<h1 id="vmmem内存占用大原因是什么">vmmem内存占用大，原因是什么？</h1>
<p>当计算机在使用时，CPU会将需要操作的数据传输到内存中进行操作，然后在操作完成后传递结果。
WSL2（Linux 的 Windows 子系统）即使在不需要时也会保留大量RAM。它可以消耗 Windows 上总内存的 50% 或 8GB，以较小者为准；在 20175 之前的版本上：Windows 上总内存的 80%。
Vmmem 负责虚拟机进程和内存管理。这意味着进程是虚拟机跳动的心脏，Vmmem 的所有活动和应用程序都在此发生。
用户设置具有大量内存和 CPU 的虚拟机是 Vmmem 需要大量内存的主要原因，因为这通常会导致他们消耗所有可用资源。</p>
<h1 id="解决方法">解决方法</h1>
<p>按下Windows + R 键，输入 %UserProfile% 并运行进入用户文件夹</p>
<p>新建文件 .wslconfig ，如果存在就覆盖，重新配置一个，然后记事本编辑:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#a6e22e">Settings</span> <span style="color:#a6e22e">apply</span> <span style="color:#a6e22e">across</span> <span style="color:#a6e22e">all</span> <span style="color:#a6e22e">Linux</span> <span style="color:#a6e22e">distros</span> <span style="color:#a6e22e">running</span> <span style="color:#a6e22e">on</span> <span style="color:#a6e22e">WSL</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">wsl2</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">memory</span>=<span style="color:#ae81ff">12</span><span style="color:#a6e22e">GB</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">swap</span>=<span style="color:#ae81ff">4</span><span style="color:#a6e22e">GB</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">localhostforwarding</span>=<span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>参数解释:
memory：分配给WSL的内存，根据自己的内存去分配哦，我的内存是32G的，我分配了12G
swap：设置交换分区的容量
localhostForwarding：用于指定绑定到 WSL VM 中的通配符或 localhost 的端口是否应可通过 localhost:port 从主机连接。</p>
<p>如果需要更多配置可查看 <a href="https://learn.microsoft.com/zh-cn/windows/wsl/wsl-config" title=".wslconfig 的配置设置">.wslconfig 的配置设置</a></p>
<p>WSL 将检测这些文件是否存在、读取内容，并在每次启动 WSL 时自动应用配置设置。</p>
<p>保存文件后,重启 WSL</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">wsl</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">shutdown</span>
</span></span></code></pre></div><p>或者重启计算机也行</p>
<p>查看 linux 内存,进入 linux 输入如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">vmstat</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">s</span>
</span></span></code></pre></div>
		</div>
	</article>
</main>




			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2026 臭大佬博客.
			<span class="footer__copyright-credits">基于 <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> 引擎和 <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> 主题</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>