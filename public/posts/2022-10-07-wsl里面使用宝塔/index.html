<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>wsl里面使用宝塔 - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="wsl里面使用宝塔"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/choudalao.github.io/css/style.css><link rel="shortcut icon" href=/choudalao.github.io/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/choudalao.github.io/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/choudalao.github.io/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/posts/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>wsl里面使用宝塔</h1></header><div class="content post__content clearfix"><h1 id=linux-一键启动>linux 一键启动</h1><p>由于在 Wsl2 中没有权限操作 Win10 的 hosts 文件，所以我们需要先解决该问题。</p><h4 id=获取hosts文件权限>获取hosts文件权限</h4><p>打开<code>C:\Windows\System32\drivers\etc</code>文件夹找到<code>hosts</code>文件，
右键->属性->安全->编辑->组或用户名中选中Users->完全控制打钩->应用->确定</p><p><img src=https://www.choudalao.com/uploads/20221010/20221010234833UiGwg8.png alt></p><p>如果经常操作<code>host</code>文件，可以发送到桌面快捷方式：
<img src=https://www.choudalao.com/uploads/20221010/20221010234619OpWcwz.png alt></p><p>权限开启后，我们就可以修改<code>hosts</code>文件了。</p><h4 id=脚本>脚本</h4><h5 id=设置默认root登录>设置默认root登录</h5><p><code>cmd</code> 命令行下，设置默认root登录，ubuntu+tab键就会出来ubuntuxxx.exe</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>ubuntuxxx</span>.<span style=color:#a6e22e>exe</span> <span style=color:#a6e22e>config</span> <span style=color:#f92672>--</span><span style=color:#66d9ef>default</span><span style=color:#f92672>-</span><span style=color:#a6e22e>user</span> <span style=color:#a6e22e>root</span>
</span></span></code></pre></div><p><code>cmd</code> 中输入<code>bash</code>进入 <code>wsl</code> ,进入用户目录 <code>cd ~</code> ，编辑<code>init.sh</code>文件 <code>vim init.sh</code>。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>/</span><span style=color:#a6e22e>bin</span><span style=color:#f92672>/</span><span style=color:#a6e22e>bash</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;开启wsl及其相关启动项：bt、nginx、mysqld、redis、memcached、php、ftp、docker&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;bt 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>bt</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;nginx 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>nginx</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;mysqld 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>mysqld</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;redis 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>redis</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;memcached 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>memcached</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;php 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>php</span><span style=color:#f92672>-</span><span style=color:#a6e22e>fpm</span><span style=color:#f92672>-</span><span style=color:#ae81ff>72</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;ftp 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>pure</span><span style=color:#f92672>-</span><span style=color:#a6e22e>ftpd</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;docker 启动：&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>service</span> <span style=color:#a6e22e>docker</span> <span style=color:#a6e22e>start</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;启动完成！&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>设置</span> <span style=color:#a6e22e>wsl</span> <span style=color:#a6e22e>host</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;为 win 设置 wsl host&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>hosts</span> <span style=color:#a6e22e>文件路径</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_hosts_path</span>=<span style=color:#e6db74>&#34;/mnt/c/Windows/System32/drivers/etc/hosts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>设置的域名</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;为 wsl2 设置的域名:dev.wsl.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_domain</span>=<span style=color:#e6db74>&#34;dev.wsl.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>获取</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>的</span> <span style=color:#a6e22e>ip</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_ip</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>ifconfig</span> <span style=color:#a6e22e>eth0</span> | <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>w</span> <span style=color:#a6e22e>inet</span> | <span style=color:#a6e22e>awk</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>{<span style=color:#a6e22e>print</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>2</span>}<span style=color:#960050;background-color:#1e0010>&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;wsl2的ip:$wsl_ip&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>判断是否已存在</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>的域名</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>如果存在则修改</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>否则追加</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>wq</span> <span style=color:#e6db74>&#34;$wsl_domain&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>then</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>此处因为权限问题没有直接用</span> <span style=color:#a6e22e>sed</span> <span style=color:#a6e22e>修改</span> <span style=color:#a6e22e>hosts</span> <span style=color:#a6e22e>文件</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>win_hosts</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>sed</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#e6db74>&#34;s/.* $wsl_domain/$wsl_ip $wsl_domain/g&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$win_hosts&#34;</span> &gt; <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$wsl_ip $wsl_domain&#34;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>wsl</span> <span style=color:#a6e22e>设置</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>host</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_hosts_path</span>=<span style=color:#e6db74>&#34;/etc/hosts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_domain</span>=<span style=color:#e6db74>&#34;dev.win.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_ip</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>cat</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>resolv</span>.<span style=color:#a6e22e>conf</span> | <span style=color:#a6e22e>grep</span> <span style=color:#e6db74>&#34;nameserver&#34;</span> | <span style=color:#a6e22e>awk</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>{<span style=color:#a6e22e>print</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>2</span>}<span style=color:#960050;background-color:#1e0010>&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>wq</span> <span style=color:#e6db74>&#34;$win_domain&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>then</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>wsl_hosts</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>sed</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#e6db74>&#34;s/.* $win_domain/$win_ip $win_domain/g&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts</span> &gt; <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$win_ip $win_domain&#34;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fi</span>
</span></span></code></pre></div><p>给权限</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>chmod</span> <span style=color:#f92672>+</span><span style=color:#a6e22e>x</span> <span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>sh</span>
</span></span></code></pre></div><p>执行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>sh</span> <span style=color:#a6e22e>init</span>.<span style=color:#a6e22e>sh</span>
</span></span></code></pre></div><h1 id=站点绑定>站点绑定</h1><h3 id=获取-wsl-的-ip>获取 <code>wsl</code> 的 <code>ip</code></h3><p><code>ip addr | grep eth0</code> 或者 <code>ip addr</code> 查看 <code>ip</code>
<img src=https://www.choudalao.com/uploads/20221007/20221007110618OQFhiS.png alt></p><h3 id=从wsl访问主机的服务>从<code>wsl</code>访问主机的服务</h3><p>在<code>wsl</code>里面执行如下命令：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span> <span style=color:#a6e22e>cat</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>resolv</span>.<span style=color:#a6e22e>conf</span> | <span style=color:#a6e22e>grep</span> <span style=color:#a6e22e>nameserver</span> | <span style=color:#a6e22e>awk</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>{ <span style=color:#a6e22e>print</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>2</span> }<span style=color:#960050;background-color:#1e0010>&#39;</span>
</span></span></code></pre></div><p>出来的<code>ip</code>就是主机<code>ip</code>，
<img src=https://www.choudalao.com/uploads/20221007/20221007110918v5NBRA.png alt></p><h3 id=改win下的host进行绑定域名例如>改<code>win</code>下的<code>host</code>进行绑定域名，例如：</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>host</span> <span style=color:#a6e22e>文件添加</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>192.168.0.104</span>  <span style=color:#a6e22e>dev</span>.<span style=color:#a6e22e>host</span>.<span style=color:#a6e22e>net</span>
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20221007/20221007102224EyBGFB.png alt></p><p><img src=https://www.choudalao.com/uploads/20221007/20221007102247JWFQVT.png alt></p><p><img src=https://www.choudalao.com/uploads/20221007/20221007102333stDmuG.png alt></p><h2 id=建立软连接连接本地文件夹>建立软连接，连接本地文件夹</h2><pre tabindex=0><code>ln -s 源文件 目标文件
# 移除软连接
rm -rf 目标文件
</code></pre><p>我们把<code>wsl</code>中的<code>/www/wwwroot</code>目录印射到本地的<code>d/wwwroot</code>,在<code>wsl</code>中，<code>/mnt/d/wwwroot</code> 指的是本地<code>d</code>盘下的<code>wwwroot</code>,
建立连接之前先把目标文件(/www/wwwroot)的wwwroot文件删除，要不就会在他里面创建，</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>ln</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>mnt</span><span style=color:#f92672>/</span><span style=color:#a6e22e>d</span><span style=color:#f92672>/</span><span style=color:#a6e22e>wwwroot</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>www</span><span style=color:#f92672>/</span><span style=color:#a6e22e>wwwroot</span>
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20221007/20221007102807cJutOW.png alt></p><h1 id=问题>问题</h1><h4 id=wsl中宝塔数据库无法使用>WSL中宝塔数据库无法使用</h4><p><a href="https://www.bt.cn/bbs/forum.php?mod=viewthread&amp;tid=65196&amp;highlight=wsl">https://www.bt.cn/bbs/forum.php?mod=viewthread&amp;tid=65196&amp;highlight=wsl</a></p><h4 id=解决-win10-wsl2-ip-变化问题>解决 Win10 Wsl2 IP 变化问题</h4><p>其实就是一键启动的步骤，给<code>win</code>的 <code>host</code>文件权限,然后设置域名，<code>init.sh</code>文件的简版<code>wsl.sh</code>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span>!<span style=color:#f92672>/</span><span style=color:#a6e22e>bin</span><span style=color:#f92672>/</span><span style=color:#a6e22e>bash</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>设置</span> <span style=color:#a6e22e>wsl</span> <span style=color:#a6e22e>host</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;为 win 设置 wsl host&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>hosts</span> <span style=color:#a6e22e>文件路径</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_hosts_path</span>=<span style=color:#e6db74>&#34;/mnt/c/Windows/System32/drivers/etc/hosts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>设置的域名</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;为 wsl2 设置的域名:dev.wsl.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_domain</span>=<span style=color:#e6db74>&#34;dev.wsl.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>获取</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>的</span> <span style=color:#a6e22e>ip</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_ip</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>ifconfig</span> <span style=color:#a6e22e>eth0</span> | <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>w</span> <span style=color:#a6e22e>inet</span> | <span style=color:#a6e22e>awk</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>{<span style=color:#a6e22e>print</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>2</span>}<span style=color:#960050;background-color:#1e0010>&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;wsl2的ip:$wsl_ip&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>判断是否已存在</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>的域名</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>如果存在则修改</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>否则追加</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>wq</span> <span style=color:#e6db74>&#34;$wsl_domain&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>then</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>此处因为权限问题没有直接用</span> <span style=color:#a6e22e>sed</span> <span style=color:#a6e22e>修改</span> <span style=color:#a6e22e>hosts</span> <span style=color:#a6e22e>文件</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>win_hosts</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>sed</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#e6db74>&#34;s/.* $wsl_domain/$wsl_ip $wsl_domain/g&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$win_hosts&#34;</span> &gt; <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$wsl_ip $wsl_domain&#34;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>wsl</span> <span style=color:#a6e22e>设置</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>host</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_hosts_path</span>=<span style=color:#e6db74>&#34;/etc/hosts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_domain</span>=<span style=color:#e6db74>&#34;dev.win.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_ip</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>cat</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>resolv</span>.<span style=color:#a6e22e>conf</span> | <span style=color:#a6e22e>grep</span> <span style=color:#e6db74>&#34;nameserver&#34;</span> | <span style=color:#a6e22e>awk</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>{<span style=color:#a6e22e>print</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>2</span>}<span style=color:#960050;background-color:#1e0010>&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>wq</span> <span style=color:#e6db74>&#34;$win_domain&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>then</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>wsl_hosts</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>sed</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#e6db74>&#34;s/.* $win_domain/$win_ip $win_domain/g&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts</span> &gt; <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$win_ip $win_domain&#34;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fi</span>
</span></span></code></pre></div><h4 id=解决php项目域名绑定>解决php项目域名绑定</h4><p>当然，如果是像php项目，需要在host文件做域名和ip的绑定，当wsl系统的ip变化时，我们可以把常用的域名绑定的ip一一替换，可以在上面脚本的基础上做个升级：
wsl.sh文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span>!<span style=color:#f92672>/</span><span style=color:#a6e22e>bin</span><span style=color:#f92672>/</span><span style=color:#a6e22e>bash</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>设置</span> <span style=color:#a6e22e>wsl</span> <span style=color:#a6e22e>host</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;为 win 设置 wsl host&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>hosts</span> <span style=color:#a6e22e>文件路径</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_hosts_path</span>=<span style=color:#e6db74>&#34;/mnt/c/Windows/System32/drivers/etc/hosts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>设置的域名</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;为 wsl2 设置的域名:dev.wsl.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_domain</span>=<span style=color:#e6db74>&#34;dev.wsl.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>获取</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>的</span> <span style=color:#a6e22e>ip</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_ip</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>ifconfig</span> <span style=color:#a6e22e>eth0</span> | <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>w</span> <span style=color:#a6e22e>inet</span> | <span style=color:#a6e22e>awk</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>{<span style=color:#a6e22e>print</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>2</span>}<span style=color:#960050;background-color:#1e0010>&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;wsl2的ip:$wsl_ip&#34;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>判断是否已存在</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>的域名</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>如果存在则修改</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>否则追加</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>wq</span> <span style=color:#e6db74>&#34;$wsl_domain&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>then</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>此处因为权限问题没有直接用</span> <span style=color:#a6e22e>sed</span> <span style=color:#a6e22e>修改</span> <span style=color:#a6e22e>hosts</span> <span style=color:#a6e22e>文件</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>win_hosts</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>sed</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#e6db74>&#34;s/.* $wsl_domain/$wsl_ip $wsl_domain/g&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$win_hosts&#34;</span> &gt; <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$wsl_ip $wsl_domain&#34;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-----------------</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>需要替换的数组域名</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>domainArr</span>=(<span style=color:#a6e22e>dev</span>.<span style=color:#a6e22e>host</span>.<span style=color:#a6e22e>net</span> <span style=color:#a6e22e>dev</span>.<span style=color:#a6e22e>guo</span>.<span style=color:#a6e22e>net</span> <span style=color:#a6e22e>xm</span>.<span style=color:#a6e22e>guo</span>.<span style=color:#a6e22e>net</span> <span style=color:#a6e22e>bs</span>.<span style=color:#a6e22e>guo</span>.<span style=color:#a6e22e>net</span> <span style=color:#a6e22e>xm</span>.<span style=color:#a6e22e>yougou</span>.<span style=color:#a6e22e>net</span> <span style=color:#a6e22e>bs</span>.<span style=color:#a6e22e>yougou</span>.<span style=color:#a6e22e>net</span> <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>yougou</span>.<span style=color:#a6e22e>net</span> <span style=color:#a6e22e>dev</span>.<span style=color:#a6e22e>blog</span>.<span style=color:#a6e22e>net</span>)
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>循环</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>domain</span> <span style=color:#a6e22e>in</span> <span style=color:#960050;background-color:#1e0010>$</span>{<span style=color:#a6e22e>domainArr</span>[<span style=color:#960050;background-color:#1e0010>@</span>]};
</span></span><span style=display:flex><span><span style=color:#a6e22e>do</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>判断是否已存在</span> <span style=color:#a6e22e>wsl2</span> <span style=color:#a6e22e>的域名</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>如果存在则修改</span><span style=color:#960050;background-color:#1e0010>，</span><span style=color:#a6e22e>否则追加</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>wq</span> <span style=color:#e6db74>&#34;$domain&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>then</span>
</span></span><span style=display:flex><span>		<span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>此处因为权限问题没有直接用</span> <span style=color:#a6e22e>sed</span> <span style=color:#a6e22e>修改</span> <span style=color:#a6e22e>hosts</span> <span style=color:#a6e22e>文件</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>win_hosts</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>sed</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#e6db74>&#34;s/.* $domain/$wsl_ip $domain/g&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$win_hosts&#34;</span> &gt; <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$wsl_ip $domain&#34;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>win_hosts_path</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fi</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>done</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-----------------</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>为</span> <span style=color:#a6e22e>wsl</span> <span style=color:#a6e22e>设置</span> <span style=color:#a6e22e>win</span> <span style=color:#a6e22e>host</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>wsl_hosts_path</span>=<span style=color:#e6db74>&#34;/etc/hosts&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_domain</span>=<span style=color:#e6db74>&#34;dev.win.net&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>win_ip</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>cat</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>etc</span><span style=color:#f92672>/</span><span style=color:#a6e22e>resolv</span>.<span style=color:#a6e22e>conf</span> | <span style=color:#a6e22e>grep</span> <span style=color:#e6db74>&#34;nameserver&#34;</span> | <span style=color:#a6e22e>awk</span> <span style=color:#960050;background-color:#1e0010>&#39;</span>{<span style=color:#a6e22e>print</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#ae81ff>2</span>}<span style=color:#960050;background-color:#1e0010>&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#a6e22e>grep</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>wq</span> <span style=color:#e6db74>&#34;$win_domain&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>then</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>wsl_hosts</span>=<span style=color:#960050;background-color:#1e0010>$</span>(<span style=color:#a6e22e>sed</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>s</span> <span style=color:#e6db74>&#34;s/.* $win_domain/$win_ip $win_domain/g&#34;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts</span> &gt; <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>echo</span> <span style=color:#e6db74>&#34;$win_ip $win_domain&#34;</span> <span style=color:#f92672>&gt;&gt;</span> <span style=color:#960050;background-color:#1e0010>$</span><span style=color:#a6e22e>wsl_hosts_path</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>fi</span>
</span></span></code></pre></div><h4 id=宝塔-mysql-外网-root-无法连接>宝塔 mysql 外网 root 无法连接</h4><p><a href=https://www.choudalao.com/article/304 title="宝塔 mysql 外网 root 无法连接">宝塔 mysql 外网 root 无法连接</a></p><h4 id=通过远程ip连接wsl中的服务>通过远程ip连接wsl中的服务</h4><p>在wsl子系统中，使用以下命令，获取wsl的ip</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>ip</span> <span style=color:#a6e22e>addr</span> | <span style=color:#a6e22e>grep</span> <span style=color:#a6e22e>eth0</span>
</span></span></code></pre></div><p>在windows中，用管理员方式打开powershell，输入命令，这里我的wsl的ip为172.23.186.3，要启动服务的端口为30000，因此命令如下</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>netsh</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>portproxy</span> <span style=color:#a6e22e>add</span> <span style=color:#a6e22e>v4tov4</span> <span style=color:#a6e22e>listenaddress</span>=<span style=color:#ae81ff>0.0.0.0</span> <span style=color:#a6e22e>listenport</span>=<span style=color:#ae81ff>30000</span> <span style=color:#a6e22e>connectaddress</span>=<span style=color:#ae81ff>172.23.186.3</span> <span style=color:#a6e22e>connectport</span>=<span style=color:#ae81ff>30000</span>
</span></span></code></pre></div><p>记得在使用的时候，替换 connectaddress 和 listenport、connectport 为你需要的值。</p><p><em>connectaddress:wsl的ip
connectport：wsl的端口
listenport：win端口</em></p><h5 id=查看当前的端口映射>查看当前的端口映射</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>netsh</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>portproxy</span> <span style=color:#a6e22e>show</span> <span style=color:#a6e22e>all</span>
</span></span></code></pre></div><h5 id=删除这个端口映射>删除这个端口映射</h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>netsh</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>portproxy</span> <span style=color:#a6e22e>delete</span> <span style=color:#a6e22e>v4tov4</span> <span style=color:#a6e22e>listenport</span>=<span style=color:#ae81ff>1234</span> <span style=color:#a6e22e>listenaddress</span>=<span style=color:#ae81ff>0.0.0.0</span>
</span></span></code></pre></div><h4 id=nginx--php-fpm-打开速度缓慢>nginx + php-fpm 打开速度缓慢</h4><p>找到 <code>nginx.conf</code>,配置如下:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-go data-lang=go><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>http</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fastcgi_buffering</span> <span style=color:#a6e22e>off</span>;
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 其他代码</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/choudalao.github.io/js/menu.js></script></body></html>