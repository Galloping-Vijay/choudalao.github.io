<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>归档 - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/choudalao.github.io/css/style.css><link rel=stylesheet href=/choudalao.github.io/css/custom.css><link rel=alternate type=application/rss+xml href=/choudalao.github.io/posts/index.xml title=臭大佬博客><link rel="shortcut icon" href=/choudalao.github.io/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/choudalao.github.io/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/choudalao.github.io/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/categories/><span class=menu__text>分类</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/tags/><span class=menu__text>标签</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/posts/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class="main list" role=main><header class=main__header><h1 class=main__title>归档</h1></header><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-20-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8/ rel=bookmark>匿名函数的使用</a></h2></header><div class="content list__excerpt post__content clearfix"><p>几行代码解决一坨一坨的代码问题,哈哈哈
修改前</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span> $api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;white_api&#39;</span>, <span style=color:#e6db74>&#39;WhiteApiController@index&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;white_api&#39;</span>, <span style=color:#e6db74>&#39;WhiteApiController@store&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>patch</span>(<span style=color:#e6db74>&#39;white_api/{whiteApi}&#39;</span>, <span style=color:#e6db74>&#39;WhiteApiController@update&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;white_api/{id}&#39;</span>, <span style=color:#e6db74>&#39;WhiteApiController@show&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>delete</span>(<span style=color:#e6db74>&#39;white_api&#39;</span>, <span style=color:#e6db74>&#39;WhiteApiController@destroy&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;white_list&#39;</span>, <span style=color:#e6db74>&#39;WhiteListController@index&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>post</span>(<span style=color:#e6db74>&#39;white_list&#39;</span>, <span style=color:#e6db74>&#39;WhiteListController@store&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>patch</span>(<span style=color:#e6db74>&#39;white_list/{WhiteList}&#39;</span>, <span style=color:#e6db74>&#39;WhiteListController@update&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;white_list/{id}&#39;</span>, <span style=color:#e6db74>&#39;WhiteListController@show&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>delete</span>(<span style=color:#e6db74>&#39;white_list&#39;</span>, <span style=color:#e6db74>&#39;WhiteListController@destroy&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//或有n个这种相同的东西
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>....</span>
</span></span></code></pre></div><p>修改后</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span>$fun <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> ($url_name, $contr_name) <span style=color:#66d9ef>use</span> ($api) {
</span></span><span style=display:flex><span>$controller <span style=color:#f92672>=</span> $contr_name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;Controller&#39;</span>;
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>get</span>($url_name, $controller <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;@index&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>post</span>($url_name, $controller <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;@store&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>patch</span>($url_name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;/{&#39;</span> <span style=color:#f92672>.</span> $contr_name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;}&#39;</span>, $controller <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;@update&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>get</span>($url_name <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;/{id}&#39;</span>, $controller <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;@show&#39;</span>);
</span></span><span style=display:flex><span>$api<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>delete</span>($url_name, $controller <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;@destroy&#39;</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//白名单接口操作
</span></span></span><span style=display:flex><span>$fun(<span style=color:#e6db74>&#39;white_api&#39;</span>,<span style=color:#e6db74>&#39;WhiteApi&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>//IP白名单
</span></span></span><span style=display:flex><span>$fun(<span style=color:#e6db74>&#39;white_list&#39;</span>,<span style=color:#e6db74>&#39;WhiteList&#39;</span>);
</span></span></code></pre></div></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-19-phper%E7%9A%84go%E4%B9%8B%E8%B7%AF-map%E9%9B%86%E5%90%88/ rel=bookmark>PHPer的Go之路 -- Map(集合)</a></h2></header><div class="content list__excerpt post__content clearfix"><p>Map 是一种无序的键值对的集合。Map 最重要的一点是通过 key 来快速检索数据，key 类似于索引，指向数据的值。</p><p>Map 是一种集合，所以我们可以像迭代数组和切片那样迭代它。不过，Map 是无序的，我们无法决定它的返回顺序，这是因为 Map 是使用 hash 表来实现的。</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-18-laravel%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ rel=bookmark>laravel常用命令</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=控制器>控制器</h1><p>普通</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>php artisan make:controller PhotoController 
</span></span></code></pre></div><p>资源</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>php artisan make:controller PhotoController --resource
</span></span></code></pre></div><p>api</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>php artisan make:controller PhotoController --api
</span></span></code></pre></div><p>#模型</p><p>模型</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>php artisan make:model User
</span></span></code></pre></div><h1 id=创建迁移>创建迁移</h1><p>使用 make:migration Artisan 命令来创建迁移：
添加</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>php</span> <span style=color:#a6e22e>artisan</span> <span style=color:#a6e22e>make</span><span style=color:#f92672>:</span><span style=color:#a6e22e>migration</span> <span style=color:#a6e22e>create_users_table</span>  <span style=color:#f92672>--</span><span style=color:#a6e22e>create</span><span style=color:#f92672>=</span><span style=color:#a6e22e>users</span>
</span></span></code></pre></div><p>修改</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span>php artisan make:migration add_votes_to_users_table <span style=color:#f92672>--</span>table<span style=color:#f92672>=</span>users
</span></span></code></pre></div><p> </p><h1 id=迁移结构>迁移结构</h1><p>up方法里面</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-java data-lang=java><span style=display:flex><span> <span style=color:#66d9ef>public</span> function <span style=color:#a6e22e>up</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        Schema::create(<span style=color:#960050;background-color:#1e0010>&#39;</span>flights<span style=color:#960050;background-color:#1e0010>&#39;</span>, function (Blueprint $table) {
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span>bigIncrements(<span style=color:#960050;background-color:#1e0010>&#39;</span>id<span style=color:#960050;background-color:#1e0010>&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span>string(<span style=color:#960050;background-color:#1e0010>&#39;</span>name<span style=color:#960050;background-color:#1e0010>&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span>string(<span style=color:#960050;background-color:#1e0010>&#39;</span>airline<span style=color:#960050;background-color:#1e0010>&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span>timestamps();
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p> </p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-17-laravel%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%AC%94%E8%AE%B0%E4%BA%8C-jwt-auth%E5%A4%9A%E8%A7%92%E8%89%B2%E8%AE%A4%E8%AF%81/ rel=bookmark>laravel前后端分离笔记二 -- jwt-auth多角色认证</a></h2></header><div class="content list__excerpt post__content clearfix"><p>前台用户功能我们已经基本完成，下面按照前台，搭建后台管理admin相应的功能。</p><h1 id=数据迁移>数据迁移</h1><p>里面的字段我们按照users的</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>php artisan make:migration create_admins_table
</span></span></code></pre></div><p>填充字段</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span>  <span style=color:#f92672>*/</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>up</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Schema</span><span style=color:#f92672>::</span><span style=color:#a6e22e>create</span>(<span style=color:#e6db74>&#39;admins&#39;</span>, <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>Blueprint</span> $table) {
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>bigIncrements</span>(<span style=color:#e6db74>&#39;id&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>comment</span>(<span style=color:#e6db74>&#39;用户表&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>string</span>(<span style=color:#e6db74>&#39;name&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>comment</span>(<span style=color:#e6db74>&#39;用户昵称&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#39;last_token&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>comment</span>(<span style=color:#e6db74>&#39;登陆时的token&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>tinyInteger</span>(<span style=color:#e6db74>&#39;status&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>default</span>(<span style=color:#e6db74>&#39;0&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>comment</span>(<span style=color:#e6db74>&#39;用户状态 -1代表已删除 0代表正常 1代表冻结&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>string</span>(<span style=color:#e6db74>&#39;email&#39;</span>,<span style=color:#ae81ff>150</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>unique</span>();
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>timestamp</span>(<span style=color:#e6db74>&#39;email_verified_at&#39;</span>)<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>nullable</span>();
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>string</span>(<span style=color:#e6db74>&#39;password&#39;</span>);
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>rememberToken</span>();
</span></span><span style=display:flex><span>            $table<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>timestamps</span>();
</span></span><span style=display:flex><span>        });
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20191117/20191117213200DRiK23.png alt></p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-17-laravel%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%AC%94%E8%AE%B0%E4%BA%8C-jwt-auth/ rel=bookmark>laravel前后端分离笔记二 -- jwt-auth</a></h2></header><div class="content list__excerpt post__content clearfix"><p>jwt-auth 的详细介绍分析可以看 JWT 超详细分析这篇文章，具体使用可以看 <a href=https://learnku.com/articles/17883 title="JWT 完整使用详解">JWT 完整使用详解</a> 这篇文章。</p><h1 id=安装>安装</h1><h2 id=composer拉取>composer拉取</h2><p> </p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>composer</span> <span style=color:#66d9ef>require</span> <span style=color:#a6e22e>tymon</span><span style=color:#f92672>/</span><span style=color:#a6e22e>jwt</span><span style=color:#f92672>-</span><span style=color:#a6e22e>auth</span> <span style=color:#ae81ff>1.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>0</span><span style=color:#f92672>-</span><span style=color:#a6e22e>rc</span><span style=color:#f92672>.</span><span style=color:#ae81ff>3</span>
</span></span></code></pre></div><h2 id=发布配置文件>发布配置文件</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>php</span> <span style=color:#a6e22e>artisan</span> <span style=color:#a6e22e>vendor</span><span style=color:#f92672>:</span><span style=color:#a6e22e>publish</span> <span style=color:#f92672>--</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Tymon\JWTAuth\Providers\LaravelServiceProvider&#34;</span>
</span></span></code></pre></div><p>此命令会在 config 目录下生成一个 jwt.php 配置文件，你可以在此进行自定义配置。</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-16-laravel%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E7%94%A8%E4%BE%8B/ rel=bookmark>laravel任务调度+命令行+邮件发送用例</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=起因>起因</h1><p>最近想把<a href=https://www.choudalao.com title=臭大佬>臭大佬</a>的seo搞起来，所以想让百度更好的收录网站：
<img src=https://www.choudalao.com/uploads/20191116/20191116213146kua9GE.png alt>
主动推送和自动推送是互补的，在自动推送的同时，想实现一个主动推送的功能，这里我的思路是利用laravel的<strong>任务调度</strong>+<strong>Artisan命令</strong>+<strong>邮件系统</strong>去实现</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-15-phper%E7%9A%84go%E4%B9%8B%E8%B7%AF-%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87/ rel=bookmark>PHPer的Go之路 -- 数组和切片</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=说明>说明</h1><p>php的数组可以说很强大，千万不要把Go的数组看做php，php数组应该是包含了Go的数组和切片。
下面我们一个一个来介绍数组和切片。</p><p>#声明和初始化
 </p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-15-invalidargumentexception-please-provide-a-valid-cache-path/ rel=bookmark>InvalidArgumentException Please provide a valid cache path</a></h2></header><div class="content list__excerpt post__content clearfix"><p>InvalidArgumentException：Please provide a valid cache path</p><p><img src=https://www.choudalao.com/uploads/20191115/20191115164331Ckk1Bz.png alt></p><p><img src=https://www.choudalao.com/uploads/20191115/20191115164359Fw8ljB.png alt></p><p>这是因为laravel的缓存路径没有找到</p><p>laravel缓存文件路径是在 config/cache.php中设置，默认存在storage文件夹中</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-15-laravel%E4%B8%AD%E8%B7%AF%E7%94%B1%E9%97%AE%E9%A2%98/ rel=bookmark>laravel中路由问题</a></h2></header><div class="content list__excerpt post__content clearfix"><p>今天在调试API接口的时候，遇到一个奇怪的问题，之前在做游戏盾的时候其实也遇到过，说明这个问题还是挺常见的，所以，今天记录一下：</p><h1 id=问题>问题</h1><p>当laravel路由中两个路由前缀相同，一个后面带参数，一个后面是跟路径，这个时候，如果带参数的写在前面，后面
例如：</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-11-15-argument-1-passed-to-tymonjwtauthjwtguardlogin-must-be-an/ rel=bookmark>Argument 1 passed to Tymon\JWTAuth\JWTGuard::login() must be an ....</a></h2></header><div class="content list__excerpt post__content clearfix"><h5 id=在使用jwt-auth做登录认证的时候为什么报这个错误出现如下报错>在使用jwt-auth做登录认证的时候为什么报这个错误，出现如下报错：</h5><blockquote><p>Symfony\Component\Debug\Exception\FatalThrowableError: Argument 1 passed to Tymon\JWTAuth\JWTGuard::login() must be an instance of Tymon\JWTAuth\Contracts\JWTSubject, instance of App\Models\User given, called in E:\wwwroot\laravel\dev.lar.net\vendor\tymon\jwt-auth\src\JWTGuard.php on line 127 in file E:\wwwroot\laravel\dev.lar.net\vendor\tymon\jwt-auth\src\JWTGuard.php on line 140</p></blockquote><p><img src=https://www.choudalao.com/uploads/20191115/20191115152256tm6rsy.png alt></p><h2 id=解决方法>解决方法：</h2><p>修改User.php模型</p><p><img src=https://www.choudalao.com/uploads/20191115/20191115152346CLBKfT.png alt></p><p>改成</p><p><img src=https://www.choudalao.com/uploads/20191115/20191115152404l1M75v.png alt></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//...
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Tymon\JWTAuth\Contracts\JWTSubject</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Notifications\Notifiable</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Foundation\Auth\User</span> <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Authenticatable</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Illuminate\Support\Facades\Auth</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>User</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Authenticatable</span> <span style=color:#66d9ef>implements</span> <span style=color:#a6e22e>JWTSubject</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Notifiable</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getJWTIdentifier</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>getKey</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getJWTCustomClaims</span>()
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> [];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#75715e>//...
</span></span></span></code></pre></div></div></article></main><div class=pagination><a class="pagination__item pagination__item--prev btn" href=/choudalao.github.io/posts/page/27/>«</a>
<span class="pagination__item pagination__item--current">28/35</span>
<a class="pagination__item pagination__item--next btn" href=/choudalao.github.io/posts/page/29/>»</a></div></div><aside class=sidebar><div class="widget-categories widget"><h4 class=widget__title>分类</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/ai/>AI</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/go/>Go</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/linux/>Linux</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/mysql/>MYSQL</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/php/>Php</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/python/>Python</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/%E4%B8%AA%E4%BA%BA/>个人</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/%E5%85%B6%E4%BB%96/>其他</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/categories/%E5%89%8D%E7%AB%AF/>前端</a></li></ul></div></div><div class="widget-recent widget"><h4 class=widget__title>近期文章</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2025-04-19-cline%E4%B8%AD%E4%BD%BF%E7%94%A8-mysql-mcp-%E6%9C%8D%E5%8A%A1/>Cline中使用 MySql MCP 服务</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2020-09-03-%E5%9F%BA%E4%BA%8Elaravel%E5%8F%8Alayui%E5%BC%80%E5%8F%91%E7%9A%84%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-laravel-wjfcms/>基于laravel及layui开发的后台管理系统 -- laravel-wjfcms</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2020-06-02-%E8%85%BE%E8%AE%AF%E4%BA%91%E4%BA%A7%E5%93%81%E5%A4%A7%E4%BF%83/>腾讯云产品大促</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2019-09-21-git%E6%93%8D%E4%BD%9C/>Git操作</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2026-01-29-openclaw-%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/>openclaw 安装及使用</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2026-01-28-mise-%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/>mise 安装及使用指南</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2026-01-26-%E7%94%A8-obsidian-%E6%89%93%E9%80%A0ai%E7%AC%94%E8%AE%B0/>用 Obsidian 打造AI笔记</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2026-01-22-claude-%E5%AE%98%E6%96%B9-skill-creator-%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/>Claude 官方 Skill-Creator 介绍及使用指南</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2026-01-22-%E9%80%9A%E8%BF%87qq%E9%82%AE%E7%AE%B1%E4%BB%A3%E6%94%B6gmail%E9%82%AE%E4%BB%B6/>通过QQ邮箱代收Gmail邮件</a></li><li class=widget__item><a class=widget__link href=/choudalao.github.io/posts/2026-01-19-%E8%A7%A3%E5%86%B3-wsl2-windows-hosts-%E5%BC%80%E5%90%AF-vpn-%E5%90%8E%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E6%9C%AC%E5%9C%B0-web-%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%97%AE%E9%A2%98/>解决 WSL2 + Windows Hosts + 开启 VPN 后无法访问本地 Web 服务的问题</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>标签</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/choudalao.github.io/tags/php/ title=Php>Php</a>
<a class="widget-taglist__link widget__link btn" href=/choudalao.github.io/tags/%E5%85%B3%E4%BA%8E/ title=关于>关于</a></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/choudalao.github.io/js/menu.js></script></body></html>