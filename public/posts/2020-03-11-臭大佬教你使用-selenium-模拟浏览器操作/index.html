<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>臭大佬教你使用 Selenium 模拟浏览器操作 - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Selenium 是一个浏览器自动化测试框架，其能够调用相关的接口来运行浏览器并执行一系列的动作，就像是真正的用户在网页上操作一样。"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/post/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>臭大佬教你使用 Selenium 模拟浏览器操作</h1></header><div class="content post__content clearfix"><h1 id=前提>前提</h1><p>除了在网页中使用接口外，还有的网站会在页面中使用大量的 Javascript 函数进行页面的各种交互和数据生成。这样的网站或者数据，我们在浏览器控制的“Network”选项卡中是找不到相关的接口的。那么该怎么办呢？
我们可以使用一个 Web 的自动化测试工具——Selenium 来调用真实的浏览器内核来进行数据采集。
Selenium 是一个浏览器自动化测试框架，其能够调用相关的接口来运行浏览器并执行一系列的动作，就像是真正的用户在网页上操作一样。Selenium 最初多用于 Web 应用的功能测试中，后来因为其能够调用浏览器的特性，能够绕过很多的反爬虫机制，日益在爬虫领域流行开来。</p><p>一个完整的 selenium 由两部分组成：</p><ul><li>selenium 框架</li><li>webdriver——浏览器驱动器</li></ul><p>其中，selenium 负责接收程序的指令和操作，webdriver 负责具体的浏览器动作的执行。</p><h1 id=安装-selenium>安装 selenium</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>pip install selenium
</span></span></code></pre></div><h3 id=下载安装-webdriver>下载安装 webdriver</h3><p>在 selenium 中，我们通常有四种浏览器驱动方案：</p><ul><li>Chrome 浏览器</li><li>FireFox 浏览器</li><li>IE 浏览器</li><li>PhantomJS 无头浏览器
前三种浏览器我们都很熟悉，PhantomJS 浏览器则很少接触。PhantomJS 浏览器是一个无头的
浏览器引擎，它没有实际的应用界面，可通过脚本来编程操作，相比较其他三种浏览器而已，内
存占用更小，更适合集成和部署。
三种浏览器引擎在 selenium 中的使用方法大同小异，在实际环境中我们推荐使用 PhantomJS，
但是为了方便演示，我们在此使用 Chrome 的引擎进行介绍。</li></ul><p>查看谷歌版本
<img src=https://www.choudalao.com/uploads/20200316/20200316134958PBdfMo.png alt>
镜像地址：
<a href=http://npm.taobao.org/mirrors/chromedriver/>http://npm.taobao.org/mirrors/chromedriver/</a>
找到对应版本后下载对应版本的webdriver。
<img src=https://www.choudalao.com/uploads/20200316/20200316135239ukZ62Z.png alt>
win下载这个
<img src=https://www.choudalao.com/uploads/20200316/20200316135304hn1Xrd.png alt>
下载后，压缩包内windows系统下为exe文件，ubuntu下为elf文件，将压缩包内的可执行文件放在你自己知道的一个任意目录下。
<img src=https://www.choudalao.com/uploads/20200316/20200316135800ga4ail.png alt>
这样我们的webdriver就已经下载完成了，在selenium中使用API指定相关路径，就可以进行自动化测试了。</p><h1 id=引入-selenium--和实例化一个浏览器引擎>引入 selenium 和实例化一个浏览器引擎</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># coding:utf-8</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> selenium <span style=color:#f92672>import</span> webdriver
</span></span><span style=display:flex><span><span style=color:#75715e># 引入 selenium  和实例化一个浏览器引擎</span>
</span></span><span style=display:flex><span>driver <span style=color:#f92672>=</span> webdriver<span style=color:#f92672>.</span>Chrome(executable_path<span style=color:#f92672>=</span><span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;E:\wwwroot\python\PyTest\test\chromedriver.exe&#34;</span>)
</span></span></code></pre></div><h3 id=打开一个网页>打开一个网页</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-shell data-lang=shell><span style=display:flex><span>driver.get<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;http://www.baidu.com&#39;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><h3 id=元素定位>元素定位</h3><p>在 requestss+BeautifulSoup 的模式中，我们一般使用 css 选择器和 find()方法来进行元素的地位
和解析，而在 selenium 中，我们有七种方式对元素进行定位：</p><ul><li>根据 ID 名进行定位——find_element_by_id()方法；</li><li>根据 name 名进行定位——find_element_by_name()方法；</li><li>根据 Class 类名进行定位——find_element_by_class_name()方法；</li><li>根据标签名进行定位——find_element_by_tag_name()方法；</li><li>根据 CSS 选择器进行定位——find_element_by_css_selector()方法；</li><li>根据链接文字进行定位——find_element_by_link_text()方法；</li><li>根据 xpath 进行定位——find_elements_by_xpath()方法（返回多个节点）；</li><li>根据 xpath 进行定位——find_element_by_xpath()方法（返回单个节点）；</li></ul><h3 id=获取元素值>获取元素值</h3><p>在定位到元素之后，我们需要获取相应元素的文本值或者是属性值。在 selenium 中可以使用 text
属性获取元素的文本值，使用 get_attribute()方法获取元素的属性值。</p><h3 id=保存页面代码供-beautifulsoup>保存页面代码供 BeautifulSoup</h3><p>除了直接使用 selenium 定位元素的方法和获取值的方法外，我们可以将 selenium 打开后的网页
保存为源码，再将其传输给 BeautifulSoup 用于元素定位和文本解析。
selenium 中将网页保存为源码的方法为 page_source：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span>wbdata <span style=color:#f92672>=</span> driver<span style=color:#f92672>.</span>page_source
</span></span></code></pre></div><p>示例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># coding:utf-8</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> selenium <span style=color:#f92672>import</span> webdriver
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> bs4 <span style=color:#f92672>import</span> BeautifulSoup
</span></span><span style=display:flex><span>driver <span style=color:#f92672>=</span> webdriver<span style=color:#f92672>.</span>Chrome(executable_path<span style=color:#f92672>=</span><span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;E:\wwwroot\python\PyTest\test\chromedriver.exe&#34;</span>)
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;http://www.toutiao.com&#39;</span>)
</span></span><span style=display:flex><span>wbdata <span style=color:#f92672>=</span> driver<span style=color:#f92672>.</span>page_source
</span></span><span style=display:flex><span>soup <span style=color:#f92672>=</span> BeautifulSoup(wbdata,<span style=color:#e6db74>&#39;lxml&#39;</span>)
</span></span><span style=display:flex><span>img_news <span style=color:#f92672>=</span> soup<span style=color:#f92672>.</span>select(<span style=color:#e6db74>&#39;div.bui-box &gt; div.bui-left &gt; div.bui-box &gt; ul.slide-list.bui-</span>
</span></span><span style=display:flex><span>left <span style=color:#f92672>&gt;</span> li <span style=color:#f92672>&gt;</span> a<span style=color:#e6db74>&#39;)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> img_news:
</span></span><span style=display:flex><span>print(i<span style=color:#f92672>.</span>get_text())
</span></span></code></pre></div><h3 id=表单输入与点击事件>表单输入与点击事件</h3><p>一些网页，我们需要输入表单之后才能获取结果。在 selenium 中，我们可以先定位到表单元素，
然后使用 send_keys()方法，在表单中输入文本，然后使用 click()方法或者 submit()方法进行提
交。</p><ul><li>send_keys()——用于在输入框中输入文本；</li><li>clear()——用于清空输入框中原有的文本；</li><li>click()——点击一个按钮；</li><li>submit()——提交一个表单；</li></ul><p>下面我们以百度搜索为例，使用 selenium 输入关键词“臭大佬”并进行搜索：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># coding:utf-8</span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> selenium <span style=color:#f92672>import</span> webdriver
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 引入 selenium  和实例化一个浏览器引擎</span>
</span></span><span style=display:flex><span>driver <span style=color:#f92672>=</span> webdriver<span style=color:#f92672>.</span>Chrome(executable_path<span style=color:#f92672>=</span><span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;E:\wwwroot\python\PyTest\test\chromedriver.exe&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 打开首页</span>
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;http://www.baidu.com&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 定位搜索框</span>
</span></span><span style=display:flex><span>inputs <span style=color:#f92672>=</span> driver<span style=color:#f92672>.</span>find_element_by_id(<span style=color:#e6db74>&#39;kw&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 在搜索框中输入文本</span>
</span></span><span style=display:flex><span>inputs<span style=color:#f92672>.</span>send_keys(<span style=color:#e6db74>&#39;臭大佬&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 定位&#34;百度一下&#34;搜索按钮</span>
</span></span><span style=display:flex><span>search <span style=color:#f92672>=</span> driver<span style=color:#f92672>.</span>find_element_by_id(<span style=color:#e6db74>&#39;su&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 点击搜索按钮</span>
</span></span><span style=display:flex><span>search<span style=color:#f92672>.</span>click()
</span></span><span style=display:flex><span><span style=color:#75715e># 等待 5 秒</span>
</span></span><span style=display:flex><span>time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 进行屏幕截屏</span>
</span></span><span style=display:flex><span>driver<span style=color:#f92672>.</span>save_screenshot(<span style=color:#e6db74>&#39;search_choudalao.jpg&#39;</span>)
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20200316/202003161435199MMVh1.png alt>
<img src=https://www.choudalao.com/uploads/20200316/20200316143534ZhXOkU.png alt></p><h3 id=切换框架iframe-和窗口>切换框架(iframe) 和窗口</h3><p>在 html 中，iframe 标签用来创建一个包含在网页文档中的另一个文档框架，在 iframe 中可以自
定义 html 的页面、样式和内容。
默认情况下，Selenium 打开和操作的都是最外层的框架，如果我们需要提取的内容或是需要输入
的表单以及点击的按钮存在于子框架(iframe)中，我们就需要先切换定位在子框架上。
另一个情况就是，某些链接点击之后会新建一个窗口，新的内容出现在新的窗口上，这时候我们
也需要将窗口切换到新的窗口中。
在 selenium 中，我们可以使用 switch_to 来对框架和窗口进行切换：</p><ul><li>switch_to.frame(框架名)：切换框架；</li><li>switch_to.window(窗口名)：切换窗口；</li></ul><h3 id=执行-js--代码>执行 js 代码</h3><p>在某些特殊情况下，我们的点击按钮或是其他浏览器行为使用 selenium 的内置方法操作不了（比
如 PhantomJS 引擎不支持非 button 元素的点击事件），那么可以执行 JS 代码来对浏览器进行
操作。
在 selenium 中执行 js 代码的方法为：execute_script()</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span>driver<span style=color:#f92672>.</span>execute_script(js 代码)
</span></span></code></pre></div><h1 id=在linux中安装使用>在linux中安装使用</h1><h4 id=contents中>contents中</h4><p>如果是宝塔环境,默认是python2的,运行如下命令,安装独立版python3,这种情况下,后面的所有<code>python</code>和<code>pip</code>命令都要变成<code>python3</code>和<code>pip3</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>curl</span> <span style=color:#a6e22e>https</span><span style=color:#f92672>://</span><span style=color:#a6e22e>download</span><span style=color:#f92672>.</span><span style=color:#a6e22e>bt</span><span style=color:#f92672>.</span><span style=color:#a6e22e>cn</span><span style=color:#f92672>/</span><span style=color:#a6e22e>install</span><span style=color:#f92672>/</span><span style=color:#a6e22e>update_panel</span><span style=color:#f92672>.</span><span style=color:#a6e22e>sh</span><span style=color:#f92672>|</span><span style=color:#a6e22e>bash</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>python3</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>V</span>
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20211112/20211112011205gGS1LE.png alt></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>pip3</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>selenium</span>
</span></span></code></pre></div><p>下载谷歌浏览器</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>https</span><span style=color:#f92672>://</span><span style=color:#a6e22e>dl</span><span style=color:#f92672>.</span><span style=color:#a6e22e>google</span><span style=color:#f92672>.</span><span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>linux</span><span style=color:#f92672>/</span><span style=color:#a6e22e>direct</span><span style=color:#f92672>/</span><span style=color:#a6e22e>google</span><span style=color:#f92672>-</span><span style=color:#a6e22e>chrome</span><span style=color:#f92672>-</span><span style=color:#a6e22e>stable_current_x86_64</span><span style=color:#f92672>.</span><span style=color:#a6e22e>rpm</span>
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20211112/202111120036275ylsiI.png alt></p><p>这个命令是下载安装最新的稳定的chrome版本，不是固定的版本，所以要注意下载chromedriver时要对应版本
我是在本地win10系统又下了一遍，由于winRAR无法解压,为此我还特意下载了个360解压,解压可以看到chrome版本是<code>95.0.4638.69</code></p><p><img src=https://www.choudalao.com/uploads/20211112/20211112003657dLNqGU.png alt>
<img src=https://www.choudalao.com/uploads/20211112/20211112004249C8EQQQ.png alt></p><h4 id=安装依赖库>安装依赖库</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>yum</span> <span style=color:#a6e22e>install</span> <span style=color:#a6e22e>pango</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXcomposite</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXcursor</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXdamage</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXext</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXtst</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>cups</span><span style=color:#f92672>-</span><span style=color:#a6e22e>libs</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXScrnSaver</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>libXrandr</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>GConf2</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>alsa</span><span style=color:#f92672>-</span><span style=color:#a6e22e>lib</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>atk</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#a6e22e>gtk3</span><span style=color:#f92672>.</span><span style=color:#a6e22e>x86_64</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>y</span>
</span></span></code></pre></div><h4 id=安装chromedriver驱动程序>安装chromedriver（驱动程序）</h4><p>打开链接:http://chromedriver.storage.googleapis.com/index.html , 我刚才chrome版本是<code>95.0.4638.69</code>,找到自己对应的版本.
<img src=https://www.choudalao.com/uploads/20211112/202111120046530oGlEY.png alt></p><p>进入到目录中,下载<code>linux</code>版本,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>wget</span> <span style=color:#a6e22e>http</span><span style=color:#f92672>://</span><span style=color:#a6e22e>chromedriver</span><span style=color:#f92672>.</span><span style=color:#a6e22e>storage</span><span style=color:#f92672>.</span><span style=color:#a6e22e>googleapis</span><span style=color:#f92672>.</span><span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#ae81ff>95.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>4638.69</span><span style=color:#f92672>/</span><span style=color:#a6e22e>chromedriver_linux64</span><span style=color:#f92672>.</span><span style=color:#a6e22e>zip</span>
</span></span></code></pre></div><p>解压</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>unzip</span> <span style=color:#a6e22e>chromedriver_linux64</span><span style=color:#f92672>.</span><span style=color:#a6e22e>zip</span>
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20211112/20211112005425cqqn5J.png alt></p><h6 id=给予运行权限>给予运行权限</h6><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>chmod</span> <span style=color:#f92672>+</span><span style=color:#a6e22e>x</span> <span style=color:#a6e22e>chromedriver</span>
</span></span></code></pre></div><h6 id=放到环境变量path路径中>放到环境变量PATH路径中</h6><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>cp</span> <span style=color:#a6e22e>chromedriver</span> <span style=color:#f92672>/</span><span style=color:#a6e22e>usr</span><span style=color:#f92672>/</span><span style=color:#a6e22e>bin</span><span style=color:#f92672>/</span>
</span></span></code></pre></div><h6 id=查看chromedriver的版本>查看chromedriver的版本</h6><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>chromedriver</span> <span style=color:#f92672>--</span><span style=color:#a6e22e>version</span>
</span></span></code></pre></div><p><img src=https://www.choudalao.com/uploads/20211112/202111120058218txg0J.png alt></p><h5 id=测试>测试</h5><p>进行脚本测试(1.py)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#75715e>#coding:utf-8
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>from</span> <span style=color:#a6e22e>selenium</span> <span style=color:#a6e22e>import</span> <span style=color:#a6e22e>webdriver</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ch_options</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>webdriver</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ChromeOptions</span>()
</span></span><span style=display:flex><span><span style=color:#75715e># 为Chrome配置无头模式
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>ch_options</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add_argument</span>(<span style=color:#e6db74>&#34;--headless&#34;</span>)  
</span></span><span style=display:flex><span><span style=color:#a6e22e>ch_options</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add_argument</span>(<span style=color:#e6db74>&#39;--no-sandbox&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>ch_options</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add_argument</span>(<span style=color:#e6db74>&#39;--disable-gpu&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>ch_options</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add_argument</span>(<span style=color:#e6db74>&#39;--disable-dev-shm-usage&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 在启动浏览器时加入配置
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>dr</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>webdriver</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Chrome</span>(<span style=color:#a6e22e>options</span><span style=color:#f92672>=</span><span style=color:#a6e22e>ch_options</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 这是测试网站
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://www.baidu.com&#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>dr</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get</span>(<span style=color:#a6e22e>url</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># 打印源码
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>print</span>(<span style=color:#a6e22e>dr</span><span style=color:#f92672>.</span><span style=color:#a6e22e>page_source</span>)
</span></span></code></pre></div><p>能打印页面说明就成功了</p><h1 id=问题>问题</h1><h4 id=deprecationwarning-executable_path-has-been-deprecated-please-pass-in-a-service-object>DeprecationWarning: executable_path has been deprecated, please pass in a Service object</h4><p>解决方式:https://blog.csdn.net/qq_57377057/article/details/128463296</p><h3 id=attributeerror-webdriver-object-has-no-attribute-find_element_by_id>AttributeError: &lsquo;WebDriver&rsquo; object has no attribute &lsquo;find_element_by_id&rsquo;</h3><p>由于版本迭代，新版的selenium已经不再使用find_element_by_id方法。
browser.find_element_by_id(&lsquo;su&rsquo;)修改为如下语句，
browser.find_element(By.ID,&lsquo;su&rsquo;)</p></div></article></main></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>