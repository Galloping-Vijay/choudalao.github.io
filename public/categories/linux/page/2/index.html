<!DOCTYPE html>
<html class="no-js" lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux - 臭大佬博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="alternate" type="application/rss+xml" href="/categories/linux/index.xml" title="臭大佬博客">

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="臭大佬博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">臭大佬博客</div>
					
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">菜单</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">首页</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/post/">
				
				<span class="menu__text">归档</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">关于</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">Linux</h1>
	</header><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2023-03-13-docker-%E5%AF%BC%E8%87%B4-windows-%E7%B3%BB%E7%BB%9F-c-%E7%9B%98%E7%88%86%E6%BB%A1/" rel="bookmark">
			docker 导致 windows 系统 C 盘爆满
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>今天发现电脑C盘爆红,找了一下大文件,发现是名为<code>ext4.vhdx</code>的文件,这个是与<code>docker</code>相关的文件,由于在<code>Linux</code>中下载安装各种软件、<code>Docker Image</code>，运行多个<code>Docker Container</code> 导致C盘空间严重不足。</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2023-03-06-docker-%E5%AE%89%E8%A3%85-kafka/" rel="bookmark">
			docker 安装 kafka
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="说明">说明</h1>
<p>到 <a href="https://hub.docker.com/search?q=kafka" title="docker hub">docker hub</a> 去搜一下<code>kafka</code>, 排在第一位的是<code>bitnami/kafka</code>,我们就用它了。</p>
<h3 id="下载-docker-composeyml">下载 docker-compose.yml</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">curl</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">sSL</span> <span style="color:#a6e22e">https</span>:<span style="color:#75715e">//raw.githubusercontent.com/bitnami/containers/main/bitnami/kafka/docker-compose.yml &gt; docker-compose.yml</span>
</span></span></code></pre></div><h3 id="修改-docker-composeyml-配置外网访问">修改 docker-compose.yml ,配置外网访问</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">version</span>: <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">zookeeper</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">image</span>: <span style="color:#a6e22e">docker</span>.<span style="color:#a6e22e">io</span><span style="color:#f92672">/</span><span style="color:#a6e22e">bitnami</span><span style="color:#f92672">/</span><span style="color:#a6e22e">zookeeper</span>:<span style="color:#ae81ff">3.8</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ports</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#e6db74">&#34;2181:2181&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">volumes</span>:
</span></span><span style="display:flex;"><span>       <span style="color:#f92672">-</span> <span style="color:#e6db74">&#34;zookeeper_data:/bitnami&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">ALLOW_ANONYMOUS_LOGIN</span>=<span style="color:#a6e22e">yes</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#a6e22e">匿名登录</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">kafka</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">image</span>: <span style="color:#a6e22e">docker</span>.<span style="color:#a6e22e">io</span><span style="color:#f92672">/</span><span style="color:#a6e22e">bitnami</span><span style="color:#f92672">/</span><span style="color:#a6e22e">kafka</span>:<span style="color:#ae81ff">3.4</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ports</span>: <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#a6e22e">记得在防火墙开放端口</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#e6db74">&#34;9092:9092&#34;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#e6db74">&#34;9093:9093&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">volumes</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#e6db74">&#34;kafka_data:/bitnami&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">environment</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">KAFKA_CFG_ZOOKEEPER_CONNECT</span>=<span style="color:#a6e22e">zookeeper</span>:<span style="color:#ae81ff">2181</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">ALLOW_PLAINTEXT_LISTENER</span>=<span style="color:#a6e22e">yes</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#a6e22e">配置监听者的安全协议</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP</span>=<span style="color:#a6e22e">CLIENT</span>:<span style="color:#a6e22e">PLAINTEXT</span>,<span style="color:#a6e22e">EXTERNAL</span>:<span style="color:#a6e22e">PLAINTEXT</span> <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#a6e22e">定义Kafka</span> <span style="color:#a6e22e">Broker的Listener的配置项</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">配置外部访问和内部访问</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">KAFKA_CFG_LISTENERS</span>=<span style="color:#a6e22e">CLIENT</span>:<span style="color:#75715e">//:9092,EXTERNAL://0.0.0.0:9093 # 将Broker的Listener信息发布到Zookeeper中，供Clients（Producer/Consumer）使用</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">KAFKA_CFG_ADVERTISED_LISTENERS</span>=<span style="color:#a6e22e">CLIENT</span>:<span style="color:#75715e">//kafka:9092,EXTERNAL://dev.wsl.net:9093 # dev.wsl.net 换成自己的ip</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">KAFKA_CFG_INTER_BROKER_LISTENER_NAME</span>=<span style="color:#a6e22e">CLIENT</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">depends_on</span>:
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">-</span> <span style="color:#a6e22e">zookeeper</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">volumes</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">zookeeper_data</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">driver</span>: <span style="color:#a6e22e">local</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">kafka_data</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">driver</span>: <span style="color:#a6e22e">local</span>
</span></span></code></pre></div><p>运行</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2023-02-10-%E9%99%90%E5%88%B6-wsl2-%E4%B8%AD-vmmem-%E7%9A%84%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8/" rel="bookmark">
			限制 WSL2 中 Vmmem 的内存占用
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="vmmem内存占用大原因是什么">vmmem内存占用大，原因是什么？</h1>
<p>当计算机在使用时，CPU会将需要操作的数据传输到内存中进行操作，然后在操作完成后传递结果。
WSL2（Linux 的 Windows 子系统）即使在不需要时也会保留大量RAM。它可以消耗 Windows 上总内存的 50% 或 8GB，以较小者为准；在 20175 之前的版本上：Windows 上总内存的 80%。
Vmmem 负责虚拟机进程和内存管理。这意味着进程是虚拟机跳动的心脏，Vmmem 的所有活动和应用程序都在此发生。
用户设置具有大量内存和 CPU 的虚拟机是 Vmmem 需要大量内存的主要原因，因为这通常会导致他们消耗所有可用资源。</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2022-12-13-nginx-location%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D%E9%97%AE%E9%A2%98/" rel="bookmark">
			nginx location路径匹配问题
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="描述">描述</h1>
<p>现在很多前端web程序都是打包单页面程序，只能有一个入口，这样会导致刷新页面报404</p>
<p><img src="https://www.choudalao.com/uploads/20221213/20221213145314tyHdtl.png" alt=""></p>
<p>其实在 nginx 中加个配置就能解决，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">location</span> <span style="color:#f92672">/</span> {
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#a6e22e">其他代码</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">try_files</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">uri</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#a6e22e">uri</span><span style="color:#f92672">/</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">index</span>.<span style="color:#a6e22e">html</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>解释:
<code>匹配所有“/”开头的路径到html目录下。try_files的含义是：首先会匹配$uri文件，如果没有去匹配$url/文件，如果再没有去找/index.html</code></p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2022-10-15-%E5%AE%9D%E5%A1%94-mysql-%E5%A4%96%E7%BD%91-root-%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5/" rel="bookmark">
			宝塔 mysql 外网 root 无法连接
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>默认情况下，宝塔里数据库的 root 账号是无法访问数据库的，如果用各个库去连接的话，又多又麻烦，所以，像测试库或者本地，不需要考虑安全因素的，完全可以直接用 root账号来管理。</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2022-10-10-linux-%E4%B8%8D%E6%98%BE%E7%A4%BA%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%89%8D%E9%9D%A2%E7%9A%84%E7%9B%AE%E5%BD%95/" rel="bookmark">
			linux 不显示命令行前面的目录
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>当我们要到比较深的目录操作时，命令行光标前面总是有一串长长的目录，看着十分难受。</p>
<h1 id="解决">解决</h1>
<p>对于有洁癖的人来说，看着极为难受，所以，我把它隐藏了，操作如下：</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2022-10-07-wsl%E9%87%8C%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%AE%9D%E5%A1%94/" rel="bookmark">
			wsl里面使用宝塔
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="linux-一键启动">linux 一键启动</h1>
<p>由于在 Wsl2 中没有权限操作 Win10 的 hosts 文件，所以我们需要先解决该问题。</p>
<h4 id="获取hosts文件权限">获取hosts文件权限</h4>
<p>打开<code>C:\Windows\System32\drivers\etc</code>文件夹找到<code>hosts</code>文件，
右键-&gt;属性-&gt;安全-&gt;编辑-&gt;组或用户名中选中Users-&gt;完全控制打钩-&gt;应用-&gt;确定</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2022-10-07-sudo-source-command-not-found/" rel="bookmark">
			sudo: source: command not found
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="分析">分析</h1>
<p>source 命令用于执行被修改的配置文件，使最新配置更新到操作系统
通常有如下命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">source</span> ~<span style="color:#f92672">/</span>.<span style="color:#a6e22e">profile</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">source</span> ~<span style="color:#f92672">/</span>.<span style="color:#a6e22e">bash_profile</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">source</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">etc</span><span style="color:#f92672">/</span><span style="color:#a6e22e">profile</span>
</span></span></code></pre></div><h1 id="解决">解决</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">vim</span> ~<span style="color:#f92672">/</span>.<span style="color:#a6e22e">bash_profile</span>
</span></span></code></pre></div><p>在<code>.bash_profile</code>文件里面输入</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">export</span> <span style="color:#a6e22e">PATH</span>=<span style="color:#f92672">/</span><span style="color:#a6e22e">usr</span><span style="color:#f92672">/</span><span style="color:#a6e22e">bin</span>:<span style="color:#f92672">/</span><span style="color:#a6e22e">usr</span><span style="color:#f92672">/</span><span style="color:#a6e22e">sbin</span>:<span style="color:#f92672">/</span><span style="color:#a6e22e">bin</span>:<span style="color:#f92672">/</span><span style="color:#a6e22e">sbin</span>:<span style="color:#f92672">/</span><span style="color:#a6e22e">usr</span><span style="color:#f92672">/</span><span style="color:#a6e22e">X11R6</span><span style="color:#f92672">/</span><span style="color:#a6e22e">bin</span>
</span></span></code></pre></div>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2022-07-20-ll-command-not-found/" rel="bookmark">
			ll: command not found
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>在<code>wsl</code>下，使用<code>ll</code>提示 <code>ll: command not found</code>,</p>
<p>网上的解决方法是编辑<code>/etc/profile</code>文件，但是<code>vim</code>方向键失效了。</p>
<h3 id="解决vim方向键失效">解决<code>vim</code>方向键失效</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#a6e22e">export</span> <span style="color:#a6e22e">TERM</span>=<span style="color:#a6e22e">sun</span><span style="color:#f92672">-</span><span style="color:#a6e22e">color</span>
</span></span></code></pre></div><h3 id="解决ll-command-not-found">解决<code>ll: command not found</code></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-go" data-lang="go"><span style="display:flex;"><span> <span style="color:#a6e22e">vim</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">etc</span><span style="color:#f92672">/</span><span style="color:#a6e22e">profile</span>
</span></span></code></pre></div><p>在末尾加上<code>alias ll='ls -l'</code></p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2022-01-10-redis-%E8%AE%BE%E7%BD%AE%E5%A4%96%E9%83%A8%E8%AE%BF%E9%97%AE/" rel="bookmark">
			redis 设置外部访问
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="配置">配置</h1>
<h1 id="放开对应安全组中redis端口">放开对应安全组中Redis端口</h1>
<p>在各大平台中把<code>redis</code>的端口加入安全组开放列表中。</p>
<h1 id="修改-redis-配置">修改 redis 配置</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#75715e"># 设置密码
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">requirepass</span> <span style="color:#ae81ff">12345</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 注释掉bind
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#bind 127.0.0.1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># 默认不是守护进程方式运行，这里可以修改
</span></span></span><span style="display:flex;"><span><span style="color:#a6e22e">daemonize</span> <span style="color:#a6e22e">no</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 禁用保护模式 把 yes 改成 no
</span></span></span><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">-</span><span style="color:#a6e22e">mode</span> <span style="color:#a6e22e">no</span>
</span></span></code></pre></div><h1 id="启动redis">启动Redis</h1>
	</div>
</article>
</main>

<div class="pagination">
	<a class="pagination__item pagination__item--prev btn" href="/categories/linux/">«</a>
	<span class="pagination__item pagination__item--current">2/6</span>
	<a class="pagination__item pagination__item--next btn" href="/categories/linux/page/3/">»</a>
</div>

			</div>
			

		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2026 臭大佬博客.
			<span class="footer__copyright-credits">基于 <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> 引擎和 <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> 主题</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>