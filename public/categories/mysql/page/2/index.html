<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>MYSQL - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/choudalao.github.io/css/style.css><link rel=alternate type=application/rss+xml href=/choudalao.github.io/categories/mysql/index.xml title=臭大佬博客><link rel="shortcut icon" href=/choudalao.github.io/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/choudalao.github.io/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/choudalao.github.io/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/post/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class="main list" role=main><header class=main__header><h1 class=main__title>MYSQL</h1></header><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2019-12-09-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C/ rel=bookmark>数据库操作</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=进入数据库win下-mysql--u-root--p>进入数据库(win下)( mysql -u root -p)</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span>mysql <span style=color:#f92672>-</span>hlocalhost <span style=color:#f92672>-</span>uroot <span style=color:#f92672>-</span>p12345 <span style=color:#f92672>//-</span>p后面跟的是密码
</span></span></code></pre></div><p>#显示数据库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SHOW</span> DATABASES;
</span></span></code></pre></div><p>#打开数据库</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span>USE db_name;
</span></span></code></pre></div><p>#显示数据表</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>show</span> tables;
</span></span></code></pre></div><p>#创建库
##语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> DATABASES db_name;
</span></span></code></pre></div><p>#删除数据库
#语法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DROP</span> <span style=color:#66d9ef>DATABASE</span> db_name;
</span></span></code></pre></div><p>#创建表</p><h2 id=语法>语法:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> tb_name ( 
</span></span><span style=display:flex><span>column_name_1 column_type_1 <span style=color:#66d9ef>constraints</span>,
</span></span><span style=display:flex><span> column_name_2 column_type_2 <span style=color:#66d9ef>constraints</span>,
</span></span><span style=display:flex><span>  column_name_3 column_type_3 <span style=color:#66d9ef>constraints</span>, 
</span></span><span style=display:flex><span>  ... 
</span></span><span style=display:flex><span>  column_name_n column_type_n <span style=color:#66d9ef>constraint</span>
</span></span><span style=display:flex><span>  s)
</span></span></code></pre></div><h2 id=示例>示例:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#f92672>`</span>hz_chat_user<span style=color:#f92672>`</span> (
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>id<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>11</span>) unsigned <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> AUTO_INCREMENT,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>account<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>150</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;账号&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>head_img<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>255</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;头像&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>status<span style=color:#f92672>`</span> tinyint(<span style=color:#ae81ff>1</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;账号状态,1:启用,0:禁用&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>password<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>255</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;密码&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>tel<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>11</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;电话&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>wechat<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>100</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;微信&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>qq<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>13</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;QQ&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>email<span style=color:#f92672>`</span> varchar(<span style=color:#ae81ff>50</span>) CHARACTER <span style=color:#66d9ef>SET</span> utf8mb4 <span style=color:#66d9ef>COLLATE</span> utf8mb4_unicode_ci <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;邮箱&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>sex<span style=color:#f92672>`</span> tinyint(<span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;-1&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;性别,-1:保密,0:男,1:女&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>delete_time<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;0&#39;</span> <span style=color:#66d9ef>COMMENT</span> <span style=color:#e6db74>&#39;删除时间戳&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>create_time<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;0&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>`</span>update_time<span style=color:#f92672>`</span> int(<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span> <span style=color:#66d9ef>DEFAULT</span> <span style=color:#e6db74>&#39;0&#39;</span>,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>PRIMARY</span> <span style=color:#66d9ef>KEY</span> (<span style=color:#f92672>`</span>id<span style=color:#f92672>`</span>),
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>KEY</span> <span style=color:#f92672>`</span>user_id<span style=color:#f92672>`</span> (<span style=color:#f92672>`</span>user_id<span style=color:#f92672>`</span>) <span style=color:#66d9ef>USING</span> BTREE,
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>KEY</span> <span style=color:#f92672>`</span>account_delete<span style=color:#f92672>`</span> (<span style=color:#f92672>`</span>account<span style=color:#f92672>`</span>,<span style=color:#f92672>`</span>delete_time<span style=color:#f92672>`</span>) <span style=color:#66d9ef>USING</span> BTREE
</span></span><span style=display:flex><span>) ENGINE<span style=color:#f92672>=</span>InnoDB <span style=color:#66d9ef>DEFAULT</span> CHARSET<span style=color:#f92672>=</span>utf8mb4 <span style=color:#66d9ef>COMMENT</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#39;用户基本信息表&#39;</span>;
</span></span></code></pre></div><p>#查看表定义</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2018-10-29-mysql%E4%B8%AD%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%BF%E7%94%A8/ rel=bookmark>mysql中索引的使用</a></h2></header><div class="content list__excerpt post__content clearfix"><p>&lt;p style="text-align: center;">&lt;img src="http://www.choudalao.com/uploads/20190921/ul2zeDUAuIXXaiQoXnMCMeDQaU3T4CWR6PVDjxRp.jpeg" alt="">&lt;/p>&lt;p style="text-align: justify;">&lt;/p>&lt;div style="text-align: center;">&lt;br>&lt;/div>&lt;p style="text-align: left;">命名规则：表名_字段名&lt;/p>1、需要加索引的字段，要在where条件中&lt;br>2、数据量少的字段不需要加索引&lt;br>3、如果where条件中是&lt;span>&lt;strong>&lt;font color="#cc0000">OR&lt;/font>&lt;/strong>&lt;/span>关系，加索引不起作用&lt;br>4、符合最&lt;span>&lt;strong>&lt;font color="#cc0000">左&lt;/font>&lt;/strong>&lt;/span>原则&lt;p>&lt;/p>&lt;p style="text-align: justify;">https://segmentfault.com/q/1010000003984016/a-1020000003984281&lt;/p>&lt;p style="text-align: justify;">联合索引又叫复合索引。对于复合索引:Mysql从左到右的使用索引中的字段，一个查询可以只使用索引中的一部份，但只能是最左侧部分。例如索引是key index (a,b,c). 可以支持&lt;font color="#cc0000">&lt;span>&lt;strong>a&lt;/strong>&lt;/span>&amp;nbsp;|&lt;span>&lt;strong>&amp;nbsp;a,b&lt;/strong>&lt;/span>|&amp;nbsp;&lt;span>&lt;strong>a,b,c&lt;/strong>&lt;/span>&lt;/font>&amp;nbsp;3种组合进行查找，但不支持 b,c进行查找 .当最左侧字段是常量引用时，索引就十分有效。&lt;/p>&lt;p style="text-align: justify;">&lt;br>两个或更多个列上的索引被称作复合索引。&lt;br>利用索引中的附加列，您可以缩小搜索的范围，但使用一个具有两列的索引 不同于使用两个单独的索引。复合索引的结构与电话簿类似，人名由姓和名构成，电话簿首先按姓氏对进行排序，然后按名字对有相同姓氏的人进行排序。如果您知 道姓，电话簿将非常有用；如果您知道姓和名，电话簿则更为有用，但如果您只知道名不姓，电话簿将没有用处。&lt;br>所以说创建复合索引时，应该仔细考虑列的顺序。对索引中的所有列执行搜索或仅对前几列执行搜索时，复合索引非常有用；仅对后面的任意列执行搜索时，复合索引则没有用处。&lt;/p>&lt;p style="text-align: justify;">http://blog.csdn.net/lmh12506/article/details/8879916&lt;/p>&lt;p style="text-align: justify;">&amp;nbsp;&lt;/p>&lt;p style="text-align: justify;">&amp;nbsp;&lt;/p>&lt;p style="text-align: justify;">当一个表有多条索引可走时,&amp;nbsp; Mysql&amp;nbsp; 根据查询语句的成本来选择走哪条索引, 联合索引的话, 它往往计算的是第一个字段(最左边那个), 这样往往会走错索引. 如:&amp;nbsp;&lt;br>索引Index_1(Create_Time, Category_ID), Index_2(Category_ID)&amp;nbsp;&lt;br>&lt;br>如果每天的数据都特别多, 而且有很多category, 但具体每个category的记录不会很多.&lt;/p>&lt;p style="text-align: justify;">当查询SQL条件为select …where create_time ….and category_id=..时, 很可能不走索引Index_1, 而走索引Index_2, 导致查询比较慢.&lt;/p>&lt;p style="text-align: justify;">解决办法是将索引字段的顺序调换一下.&lt;/p>&lt;p style="text-align: justify;">http://www.cnblogs.com/krisy/archive/2013/07/12/3186258.html&lt;/p>&lt;p style="text-align: justify;">&amp;nbsp;&lt;/p>&lt;p style="text-align: justify;">&lt;span lang="EN-US">&amp;nbsp;创建索引&lt;/span>&lt;/p>&lt;p style="text-align: justify;">在执行&lt;span lang="EN-US">CREATE TABLE语句时可以创建索引，也可以单独用&lt;span lang="EN-US">CREATE INDEX或&lt;span lang="EN-US">ALTER TABLE来为表增加索引。&lt;/span>&lt;/span>&lt;/span>&lt;/p>&lt;p style="text-align: justify;">&lt;span lang="EN-US">&lt;span lang="EN-US">&lt;span lang="EN-US">&lt;span lang="EN-US">&lt;span lang="EN-US">1．&lt;span lang="EN-US">ALTER TABLE&lt;/span>&lt;/span>&lt;/span>&lt;/span>&lt;/span>&lt;/span>&lt;/p>&lt;p style="text-align: justify;">&lt;span lang="EN-US">ALTER TABLE用来创建普通索引、&lt;span lang="EN-US">UNIQUE索引或&lt;span lang="EN-US">PRIMARY KEY索引。&lt;/span>&lt;/span>&lt;/span>&lt;/p>&lt;p style="text-align: justify;">&lt;span lang="EN-US">&amp;nbsp;&lt;/span>&lt;/p>&lt;pre lay-lang="PHP">&lt;code class="PHP">ALTER TABLE table_name ADD INDEX index_name (column_list)</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2017-10-27-mysql%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E7%9B%B8%E5%90%8C%E5%89%8D%E7%BC%80%E7%9A%84%E8%A1%A8%E5%92%8C%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D/ rel=bookmark>mysql批量删除相同前缀的表和修改表名</a></h2></header><div class="content list__excerpt post__content clearfix"><p>&lt;p>&amp;nbsp;由于博客升级,要把原来的系统和数据全都替换掉,安装完之后发现原来的数据表全都还在,根据表名前缀的区别,可以批量的删掉原来的数据表,操作如下:&lt;/p>&lt;p>执行sql语句:&lt;/p>&lt;pre lay-lang="JavaScript">&lt;code class="JavaScript">Select CONCAT( &lsquo;drop table &lsquo;, table_name, &lsquo;;&rsquo; )
FROM information_schema.tables
Where table_name LIKE &lsquo;pre_%&rsquo;;&lt;/code>&lt;/pre>&lt;p>&lt;span>解释:like<code>pre_%</code>,其中pre_为你需要删除的表前缀,根据你自己的需求修改,&lt;/span>&lt;/p>&lt;p>执行查询,会自动把匹配的表生成出 drop table table_name这样的SQL语句,&lt;/p>&lt;p>运行结果如下:&lt;/p>&lt;p>&lt;img src="http://www.yuemeet.com/data/upload/2017-10-27/59f2a343ab8ba.png" title="59f2a343ab8ba.png" alt="59f2a343ab8ba.png" _src="/data/upload/2017-10-27/59f2a343ab8ba.png">&lt;/p>&lt;p>批量复制一下到记事本或者et之类的编辑工具中,确定你的sql语句是否正确.这么一来也可以安全的审核一下语句,避免误操作.&lt;/p>&lt;p>最好用记事本打开,这样可以去掉样式,检查之后复制到sqlyog里面运行:&lt;/p>&lt;p>&lt;img src="http://www.yuemeet.com/data/upload/2017-10-27/59f2a7a5621d7.png" title="59f2a7a5621d7.png" alt="59f2a7a5621d7.png" <em>src="/data/upload/2017-10-27/59f2a7a5621d7.png">&lt;/p>&lt;p>ok,成功删除相同表前缀的文章了!&lt;/p>&lt;h3>拓展:&lt;br>&lt;/h3>&lt;p>批量修改表前缀:&lt;/p>&lt;pre lay-lang="JavaScript">&lt;code class="JavaScript">Select CONCAT( &lsquo;ALTER TABLE &lsquo;, table_name, &lsquo;RENAME TO &lsquo;, table_name,&rsquo;;&rsquo; )
FROM information_schema.tables
Where table_name LIKE &lsquo;uc</em>%&rsquo;;<br>&lt;/code>&lt;/pre>&lt;p>&lt;br>&lt;/p>&lt;pre class="brush:sql;toolbar:false;">批量复制一下到记事本或者&amp;nbsp;et之类的编辑工具中,然后批量替换&amp;nbsp;RENAME&amp;nbsp;TO&amp;nbsp;uc&amp;nbsp;成&amp;nbsp;RENAME&amp;nbsp;TO&amp;nbsp;你想要的表前缀完成后&amp;nbsp;再执行&lt;br>&lt;/pre>&lt;p>&lt;br>&lt;/p>&lt;p>&lt;br>&lt;/p></p></div></article></main><div class=pagination><a class="pagination__item pagination__item--prev btn" href=/choudalao.github.io/categories/mysql/>«</a>
<span class="pagination__item pagination__item--current">2/2</span></div></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/choudalao.github.io/js/menu.js></script></body></html>