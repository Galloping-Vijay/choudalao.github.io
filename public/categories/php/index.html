<!doctype html><html class=no-js lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Php - 臭大佬博客</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/choudalao.github.io/css/style.css><link rel=alternate type=application/rss+xml href=/choudalao.github.io/categories/php/index.xml title=臭大佬博客><link rel="shortcut icon" href=/choudalao.github.io/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=/choudalao.github.io/ title=臭大佬博客 rel=home><div class="logo__item logo__text"><div class=logo__title>臭大佬博客</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/choudalao.github.io/><span class=menu__text>首页</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/post/><span class=menu__text>归档</span></a></li><li class=menu__item><a class=menu__link href=/choudalao.github.io/about/><span class=menu__text>关于</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class="main list" role=main><header class=main__header><h1 class=main__title>Php</h1></header><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2020-09-03-%E5%9F%BA%E4%BA%8Elaravel%E5%8F%8Alayui%E5%BC%80%E5%8F%91%E7%9A%84%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-laravel-wjfcms/ rel=bookmark>基于laravel及layui开发的后台管理系统 -- laravel-wjfcms</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=前言>前言</h1><p>本人小菜鸡一枚，工作之余自己琢磨着开发一套自己的博客系统，仰仗于laravel的强大，经过一段时间的折腾，开发了这套CMS，用于写写博客，然后呢，接到外包的时候，用它撸也是方便了很多，大大提升了开发效率。</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2025-03-31-vscode-%E4%B8%AD%E4%BD%BF%E7%94%A8-php-xdebug/ rel=bookmark>vscode 中使用 php xdebug</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=前提>前提</h1><h4 id=环境>环境:</h4><p>win本地使用vscode,php环境是在wsl中的.</p><h1 id=安装>安装</h1><h2 id=php安装xdebug扩展>php安装xdebug扩展</h2><p>在wsl的php中安装xdebug,此步骤比较简单,网上教程很多,这里略过.安装完配置如下:
php.ini</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2022-04-02-php%E4%BB%8E%E5%B0%8F%E8%AF%B4%E7%AB%A0%E8%8A%82%E6%A0%87%E9%A2%98%E4%B8%AD%E8%8E%B7%E5%8F%96%E7%AB%A0%E8%8A%82%E7%B4%A2%E5%BC%95/ rel=bookmark>php从小说章节标题中获取章节索引</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=前言>前言</h1><p>最近在对接一个小说系统，其中有一个需求是：
小说的前<code>N</code>章是免费无广告的，之后的章节要添加一些广告进去的。</p><p>研究了一下小说的整个字段，并没有发现数字索引，</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2022-03-29-redirecting-to-httpsopenweinqqcom/ rel=bookmark>Redirecting to https://open.wein.qq.com/...</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=问题>问题</h1><p>在用<code>Easywechat</code> 做微信授权登录的时候，发现会请求两次<code>https://open.weixin.qq.com/connect/oauth2/authorize</code>,</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2022-01-11-curl%E8%AF%B7%E6%B1%82%E4%B8%ADcurlopt_postfields%E5%8F%AA%E6%94%AF%E6%8C%81%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84/ rel=bookmark>cURL请求中CURLOPT_POSTFIELDS只支持一维数组</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=post参数>POST参数</h1><p>使用 <code>CURL</code> 并且参数为数据时，向服务器提交数据的时候，<code>HTTP</code>头会发送<code>Content_type: application/x-www-form-urlencoded</code>。这个是正常的网页<code>&lt;form></code>提交表单时，浏览器发送的头部。而 <code>multipart/form-data</code> 我们知道这是用于上传文件的表单。包括了 <code>boundary</code> 分界符，会多出很多字节。</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2021-12-28-php-%E7%9A%84-curl-%E5%B9%B6%E5%8F%91%E8%AF%B7%E6%B1%82/ rel=bookmark>php 的 curl 并发请求</a></h2></header><div class="content list__excerpt post__content clearfix"><p>并发请求</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span>
</span></span><span style=display:flex><span> 	<span style=color:#e6db74>/**
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * 多线程检测
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * Date: 2021/12/15
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * Time: 23:58
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * @param array $arr 数组
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * @param int $timeout
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     * @return mixed
</span></span></span><span style=display:flex><span><span style=color:#e6db74>     */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>curlMulCheck</span>(<span style=color:#a6e22e>string</span> $url,<span style=color:#66d9ef>array</span> $arr,<span style=color:#a6e22e>int</span> $timeout <span style=color:#f92672>=</span> <span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        $header <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>        $header[] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Accept: image/gif, image/jpeg, image/pjpeg, image/pjpeg, application/x-ms-application, application/x-ms-xbap, application/vnd.ms-xpsdocument, application/xaml+xml, */*&#39;</span>;
</span></span><span style=display:flex><span>        $header[] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Connection: Keep-Alive&#39;</span>;
</span></span><span style=display:flex><span>        $header[] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Accept-Language: zh-cn&#39;</span>;
</span></span><span style=display:flex><span>        $header[] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Cache-Control: no-cache&#39;</span>;
</span></span><span style=display:flex><span>        $mh <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_multi_init</span>(); <span style=color:#75715e>//创建多个curl语柄
</span></span></span><span style=display:flex><span>        <span style=color:#66d9ef>foreach</span> ($arr <span style=color:#66d9ef>as</span> $k <span style=color:#f92672>=&gt;</span> $v) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// 假设每个值是传递的id
</span></span></span><span style=display:flex><span>			$url <span style=color:#f92672>=</span> $url<span style=color:#f92672>.</span><span style=color:#e6db74>&#39;?id=&#39;</span><span style=color:#f92672>.</span>$v;
</span></span><span style=display:flex><span>            $conn[$k] <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_init</span>($url);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>stripos</span>($url, <span style=color:#e6db74>&#34;https://&#34;</span>) <span style=color:#f92672>!==</span> <span style=color:#66d9ef>FALSE</span>) {
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_SSL_VERIFYPEER</span>, <span style=color:#66d9ef>FALSE</span>);
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_SSL_VERIFYHOST</span>, <span style=color:#66d9ef>FALSE</span>);
</span></span><span style=display:flex><span>                <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_SSLVERSION</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_HEADER</span>, <span style=color:#66d9ef>true</span>); <span style=color:#75715e>//如果不为 true, 只会获得响应的正文
</span></span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_TIMEOUT</span>, $timeout); <span style=color:#75715e>//设置超时时间
</span></span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_HTTPHEADER</span>, $header);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_FOLLOWLOCATION</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_RETURNTRANSFER</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_REFERER</span>, $url);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_setopt</span>($conn[$k], <span style=color:#a6e22e>CURLOPT_USERAGENT</span>, <span style=color:#e6db74>&#39;Mozilla/5.0 (iPhone; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9B176 MicroMessenger/4.3.2&#39;</span>);
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_multi_add_handle</span>($mh, $conn[$k]);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 执行批处理句柄
</span></span></span><span style=display:flex><span>        $active <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>do</span> {
</span></span><span style=display:flex><span>            $mrc <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_multi_exec</span>($mh, $active); <span style=color:#75715e>//当无数据，active=true
</span></span></span><span style=display:flex><span>        } <span style=color:#66d9ef>while</span> ($mrc <span style=color:#f92672>==</span> <span style=color:#a6e22e>CURLM_CALL_MULTI_PERFORM</span>); <span style=color:#75715e>//当正在接受数据时
</span></span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> ($active <span style=color:#f92672>&amp;&amp;</span> $mrc <span style=color:#f92672>==</span> <span style=color:#a6e22e>CURLM_OK</span>) { <span style=color:#75715e>//当无数据时或请求暂停时，active=true
</span></span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>curl_multi_select</span>($mh) <span style=color:#f92672>!=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>do</span> {
</span></span><span style=display:flex><span>                    $mrc <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_multi_exec</span>($mh, $active);
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>while</span> ($mrc <span style=color:#f92672>==</span> <span style=color:#a6e22e>CURLM_CALL_MULTI_PERFORM</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>foreach</span> ($arr <span style=color:#66d9ef>as</span> $k <span style=color:#f92672>=&gt;</span> $url) {
</span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_error</span>($conn[$k]);
</span></span><span style=display:flex><span>            <span style=color:#75715e>//echo curl_error($conn[$k]);die;
</span></span></span><span style=display:flex><span>            <span style=color:#75715e>//$gg = curl_getinfo($conn[$k], CURLINFO_REDIRECT_URL);
</span></span></span><span style=display:flex><span>            <span style=color:#75715e>//var_dump($conn[$k]);die;
</span></span></span><span style=display:flex><span>            $content <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_multi_getcontent</span>($conn[$k]); <span style=color:#75715e>//获得返回信息
</span></span></span><span style=display:flex><span>            $headerSize <span style=color:#f92672>=</span> <span style=color:#a6e22e>curl_getinfo</span>($conn[$k], <span style=color:#a6e22e>CURLINFO_HEADER_SIZE</span>); <span style=color:#75715e>// 获得响应结果里的：头大小
</span></span></span><span style=display:flex><span>            $header <span style=color:#f92672>=</span> <span style=color:#a6e22e>substr</span>($content, <span style=color:#ae81ff>0</span>, $headerSize);
</span></span><span style=display:flex><span>           <span style=color:#75715e>// 逻辑代码
</span></span></span><span style=display:flex><span>		   <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_multi_remove_handle</span>($mh, $conn[$k]); <span style=color:#75715e>//释放资源
</span></span></span><span style=display:flex><span>            <span style=color:#a6e22e>curl_close</span>($conn[$k]); <span style=color:#75715e>//关闭语柄
</span></span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>curl_multi_close</span>($mh);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> $resDoamin;
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>get、post请求</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2021-12-28-%E5%BE%AE%E4%BF%A1%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8E%A5%E5%8F%A3%E9%9B%86%E6%88%90/ rel=bookmark>微信开放平台第三方接口集成</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=介绍>介绍</h1><p>在做微信开放平台第三方应用开发的时候，每次都要登录到微信开放平台中操作，如果多了的话，很不方便，所以想到集成到自己后台操作，这样就可以同时管理n个开放平台里面的n个第三方应用了。</p></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2021-12-15-laravel-%E6%97%A5%E5%BF%97%E5%AD%98%E5%82%A8%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6/ rel=bookmark>laravel 日志存储任意文件</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=代码>代码</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#66d9ef>use</span> <span style=color:#a6e22e>Monolog\Logger</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Logger</span>(<span style=color:#e6db74>&#39;任意日志&#39;</span>))<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>pushHandler</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RotatingFileHandler</span>(<span style=color:#a6e22e>storage_path</span>(<span style=color:#e6db74>&#39;logs/other.log&#39;</span>)))<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#39;失败了&#39;</span>);
</span></span></code></pre></div></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2021-12-14-no-connector-for/ rel=bookmark>No connector for []</a></h2></header><div class="content list__excerpt post__content clearfix"><h1 id=问题>问题</h1><p>laravel队列报错</p><p><del>No connector for []</del></p><h1 id=解决>解决</h1><p>这是配置文件写错了，QUEUE_CONNECTION的值没有找到对应的配置。配置改成正确的就可以了。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#a6e22e>QUEUE_CONNECTION</span><span style=color:#f92672>=</span><span style=color:#a6e22e>redis</span>
</span></span></code></pre></div></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/choudalao.github.io/posts/2021-09-24-php-%E7%9A%84%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F/ rel=bookmark>PHP 的运行模式</a></h2></header><div class="content list__excerpt post__content clearfix"><h2 id=model方式>Model方式</h2><p><code>PHP Module</code>加载方式,就是把<code>php</code>作为<code>apache</code>的一个子模块运行.当通过<code>web</code>访问php文件时,<code>apache</code>就会调用<code>php5_module</code>来解析<code>php</code>代码。</p></div></article></main><div class=pagination><span class="pagination__item pagination__item--current">1/9</span>
<a class="pagination__item pagination__item--next btn" href=/choudalao.github.io/categories/php/page/2/>»</a></div></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2026 臭大佬博客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> 主题</span></div></div></footer></div><script async defer src=/choudalao.github.io/js/menu.js></script></body></html>