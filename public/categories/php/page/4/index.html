<!DOCTYPE html>
<html class="no-js" lang="en">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Php - 臭大佬博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	
	<link rel="alternate" type="application/rss+xml" href="/categories/php/index.xml" title="臭大佬博客">

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="臭大佬博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">臭大佬博客</div>
					
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">菜单</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/">
				
				<span class="menu__text">首页</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/post/">
				
				<span class="menu__text">归档</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/about/">
				
				<span class="menu__text">关于</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">Php</h1>
	</header><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2020-05-06-warning-module-redis-already-loaded-in-unknown-on-line-0/" rel="bookmark">
			Warning: Module &#39;redis&#39; already loaded in Unknown on line 0
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>Warning: Module &lsquo;redis&rsquo; already loaded in Unknown on line 0</p>
<h1 id="分析">分析</h1>
<p>php加载模块有两种方式，一种是通过php.ini 加载模块，另一种是通过编译时的参数加载模块。</p>
<h1 id="解决">解决</h1>
<p>这里，报错信息提示已经加载过，我尝试将php.ini 文件中的相关extensions注释掉
<img src="https://www.choudalao.com/uploads/20200506/20200506110542mPT2zk.png" alt="">
<img src="https://www.choudalao.com/uploads/20200506/20200506110552PIjzaI.png" alt=""></p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2020-04-28-supervisor%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/" rel="bookmark">
			Supervisor安装及使用
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="介绍">介绍</h1>
<p>Supervisor官网：http://supervisord.org。
Supervisor是用Python开发的一套通用的进程管理程序，能将一个普通的命令行进程变为后台daemon，并监控进程状态，异常退出时能自动重启。它是通过fork/exec的方式把这些被管理的进程当作supervisor的子进程来启动，这样只要在supervisor的配置文件中，把要管理的进程的可执行文件的路径写进去即可。也实现当子进程挂掉的时候，父进程可以准确获取子进程挂掉的信息的，可以选择是否自己启动和报警。supervisor还提供了一个功能，可以为supervisord或者每个子进程，设置一个非root的user，这个user就可以管理它对应的进程。</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2020-04-15-do-not-run-composer-as-rootsuper-user-see-httpsgetcomposerorgroot-for-details/" rel="bookmark">
			Do not run Composer as root/super user! See https://getcomposer.org/root for details
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>Do not run Composer as root/super user! See <a href="https://getcomposer.org/root">https://getcomposer.org/root</a> for details</p>
<p>意思是说：不要以root /超级用户身份运行Composer！
有关详细信息，请参见https://getcomposer.org/root
<img src="https://www.choudalao.com/uploads/20200415/20200415103148wU9RFc.png" alt=""></p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2020-04-04-warning-chdir-open_basedir-restriction-in-effect-file-is-not-within-the-allowed/" rel="bookmark">
			Warning: chdir(): open_basedir restriction in effect. File(../) is not within the allowed path(s):
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>在宝塔环境下报：
Warning: chdir(): open_basedir restriction in effect. File(../) is not within the allowed path(s):
<img src="https://www.choudalao.com/uploads/20200404/20200404215446XGeiu6.png" alt=""></p>
<h1 id="解决">解决</h1>
<p>关闭防跨站攻击(open_basedir)即可！
<img src="https://www.choudalao.com/uploads/20200404/20200404215548bh8hYN.png" alt=""></p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2020-03-04-composer%E6%8A%A5%E9%94%99proc_open-fork-failed-cannot-allocate-memory/" rel="bookmark">
			composer报错proc_open(): fork failed - Cannot allocate memory
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>在linux服务器使用composer部署yii项目时，出现“proc_open(): fork failed - Cannot allocate memory”
<img src="https://www.choudalao.com/uploads/20200304/202003042047415MZwez.png" alt=""></p>
<h1 id="解决方法">解决方法</h1>
<p>先运行 free -m 看下空间是多少
在命令行环境依次运行以下三条命令</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2020-03-03-linux%E6%9B%B4%E6%8D%A2php%E7%89%88%E6%9C%AC/" rel="bookmark">
			linux更换php版本
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="查看当前版本">查看当前版本</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">php</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">v</span>
</span></span></code></pre></div><p><img src="https://www.choudalao.com/uploads/20200303/20200303221733l4ydGK.png" alt=""></p>
<h1 id="首先你本地有已经下好的新版本">首先你本地有已经下好的新版本</h1>
<p>博主本地已有php7.2的
<img src="https://www.choudalao.com/uploads/20200303/20200303221920TsBSxV.png" alt=""></p>
<h1 id="删除掉默认的">删除掉默认的</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">rm</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">f</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">usr</span><span style="color:#f92672">/</span><span style="color:#a6e22e">bin</span><span style="color:#f92672">/</span><span style="color:#a6e22e">php</span>
</span></span></code></pre></div><h1 id="引用你想要的版本">引用你想要的版本</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#a6e22e">ln</span> <span style="color:#f92672">-</span><span style="color:#a6e22e">sf</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">www</span><span style="color:#f92672">/</span><span style="color:#a6e22e">server</span><span style="color:#f92672">/</span><span style="color:#a6e22e">php</span><span style="color:#f92672">/</span><span style="color:#ae81ff">72</span><span style="color:#f92672">/</span><span style="color:#a6e22e">bin</span><span style="color:#f92672">/</span><span style="color:#a6e22e">php</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">usr</span><span style="color:#f92672">/</span><span style="color:#a6e22e">bin</span><span style="color:#f92672">/</span><span style="color:#a6e22e">php</span>
</span></span></code></pre></div><p><img src="https://www.choudalao.com/uploads/20200303/20200303222104UJCPfr.png" alt=""></p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2020-01-06-laravel%E7%9A%84%E5%94%AF%E4%B8%80%E9%AA%8C%E8%AF%81%E6%80%8E%E4%B9%88%E8%BF%87%E6%BB%A4%E8%BD%AF%E5%88%A0%E9%99%A4%E7%9A%84%E6%95%B0%E6%8D%AE/" rel="bookmark">
			laravel的唯一验证怎么过滤软删除的数据
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="问题">问题</h1>
<p>如果表用到软删除，在使用表单验证唯一的时候，如果该值存在，则无法过唯一。</p>
<p>栗子：
<img src="https://www.choudalao.com/uploads/20200106/20200106153417sZKDKb.png" alt=""></p>
<p><img src="https://www.choudalao.com/uploads/20200106/202001061534533qH2qq.png" alt=""></p>
<p>可以看到，domain值为www.2gdddl.com的记录，已经被软删除了，在添加的时候。
<img src="https://www.choudalao.com/uploads/20200106/202001061535351jO3B2.png" alt=""></p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2019-12-18-%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%8A%BD%E8%B1%A1%E7%B1%BB%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB/" rel="bookmark">
			接口和抽象类有什么区别
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<ul>
<li>1、抽象类和接口都不能直接实例化，如果要实例化，抽象类变量必须指向实现所有抽象方法的子类对象，接口变量必须指向实现所有接口方法的类对象。</li>
<li>2、抽象类要被子类继承，接口要被类实现。</li>
<li>3、接口只能做方法申明，抽象类中可以做方法申明，也可以做方法实现</li>
<li>4、接口里定义的变量只能是公共的静态的常量，抽象类中的变量是普通变量。</li>
<li>5、抽象类里的抽象方法必须全部被子类所实现，如果子类不能全部实现父类抽象方法，那么该子类只能是抽象类。同样，一个实现接口的时候，如不能全部实现接口方法，那么该类也只能为抽象类。</li>
<li>6、抽象方法只能申明，不能实现，接口是设计的结果 ，抽象类是重构的结果</li>
<li>7、抽象类里可以没有抽象方法</li>
<li>8、如果一个类里有抽象方法，那么这个类只能是抽象类</li>
<li>9、抽象方法要被实现，所以不能是静态的，也不能是私有的。</li>
<li>10、接口可继承接口，并可多继承接口，但类只能单根继承。</li>
</ul>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2019-12-16-laravel-%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E8%8E%B7%E5%8F%96%E7%BB%93%E6%9E%9C%E5%A6%82%E4%BD%95%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E4%B8%BA%E7%A9%BA/" rel="bookmark">
			laravel 查询数据库获取结果如何判断是否为空？
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="前提">前提</h1>
<p>在使用 Laravel Eloquent 模型时，我们要判断取出的结果集是否为空，但我们发现直接使用 is_null 或 empty是无法判段它结果集是否为空的！！！</p>
<p>#代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-php" data-lang="php"><span style="display:flex;"><span>$users <span style="color:#f92672">=</span> <span style="color:#a6e22e">users</span><span style="color:#f92672">::</span><span style="color:#a6e22e">where</span>(<span style="color:#e6db74">&#39;status&#39;</span>,<span style="color:#ae81ff">1</span>)<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">get</span>();
</span></span></code></pre></div><h1 id="判断方式">判断方式</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> ($users<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">first</span>()) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span> } 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>$users<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isEmpty</span>()) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span> } 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> ($users<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">count</span>()) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//
</span></span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><h1 id="解释">解释</h1>
<p>如果没有此用户信息则返回：
object(Illuminate\Database\Eloquent\Collection)#278 (1) { [&ldquo;items&rdquo;:protected]=&gt; array(0) { } },这个时候怎么判断查询出来的集合数据是否为空呢
$result-&gt;isEmpty() //判断为空
$results-&gt;isNotEmpty()  //判断不为空   
$results-&gt;count()  //判断查询出来的条数 为0则 为空</p>
	</div>
</article><article class="list__item post">
	
	<header class="list__header">
		<h2 class="list__title post__title">
			<a href="/posts/2019-12-11-laravel%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%AE%E6%94%B9%E5%89%8D%E5%90%8E%E7%9A%84%E5%80%BC/" rel="bookmark">
			laravel获取数据库修改前后的值
			</a>
		</h2>
		
	</header>
	<div class="content list__excerpt post__content clearfix">
		<h1 id="前提">前提</h1>
<p>使用Eloquent</p>
<h1 id="获取方式">获取方式</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"><code class="language-php" data-lang="php"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> ($article<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">isDirty</span>(<span style="color:#e6db74">&#39;title&#39;</span>)) {
</span></span><span style="display:flex;"><span>	$user <span style="color:#f92672">=</span> <span style="color:#a6e22e">Auth</span><span style="color:#f92672">::</span><span style="color:#a6e22e">user</span>()<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">username</span>;
</span></span><span style="display:flex;"><span>	$oldTitle <span style="color:#f92672">=</span> $article<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">getOriginal</span>(<span style="color:#e6db74">&#39;title&#39;</span>); <span style="color:#75715e">// 原始值
</span></span></span><span style="display:flex;"><span>	$newTitle <span style="color:#f92672">=</span> $article<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">title</span>;                <span style="color:#75715e">// 新值
</span></span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ActionLog</span><span style="color:#f92672">::</span><span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$user</span><span style="color:#e6db74"> 把标题 </span><span style="color:#e6db74">$oldTitle</span><span style="color:#e6db74"> 修改为 </span><span style="color:#e6db74">$newTitle</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="获取修改字段">获取修改字段</h1>
<p><code>article-&gt;getDirty()</code>可以获取修改的所有字段如下:</p>
	</div>
</article>
</main>

<div class="pagination">
	<a class="pagination__item pagination__item--prev btn" href="/categories/php/page/3/">«</a>
	<span class="pagination__item pagination__item--current">4/9</span>
	<a class="pagination__item pagination__item--next btn" href="/categories/php/page/5/">»</a>
</div>

			</div>
			

		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2026 臭大佬博客.
			<span class="footer__copyright-credits">基于 <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> 引擎和 <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> 主题</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>